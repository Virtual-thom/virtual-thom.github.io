<!DOCTYPE html>
<html lang="fr">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="apple-touch-icon" href="https://virtual-thom.github.io/archives/apple-touch-icon.png">
  <link rel="icon" href="https://virtual-thom.github.io/archives/favicon.ico" />
  <!-- Remplacé par Jekyll SEO (sinon apparait en double)
  <title>Virtual-Thom | Blog-notes VTOM et informatique</title>
  <meta name="description" content="Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps">
  --> 
  
  <link rel="canonical" href="https://virtual-thom.github.io/archives/">
  
  <link rel="stylesheet" media="screen" href="https://virtual-thom.github.io/archives/assets/main.css">
  
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Virtual-Thom Blog-notes VTOM et informatique | Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Virtual-Thom Blog-notes VTOM et informatique" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps" />
<meta property="og:description" content="Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps" />
<link rel="canonical" href="https://virtual-thom.github.io/archives/" />
<meta property="og:url" content="https://virtual-thom.github.io/archives/" />
<meta property="og:site_name" content="Virtual-Thom Blog-notes VTOM et informatique" />
<meta property="og:type" content="website" />
<link rel="next" href="https://virtual-thom.github.io/archives/page2" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Virtual-Thom Blog-notes VTOM et informatique" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","description":"Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps","headline":"Virtual-Thom Blog-notes VTOM et informatique","name":"Virtual-Thom Blog-notes VTOM et informatique","url":"https://virtual-thom.github.io/archives/"}</script>
<!-- End Jekyll SEO tag -->

  
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z8Y7902GRV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z8Y7902GRV');
</script>


  <body>
    <div class="container">
      <header id="site-header">
  <h1>Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps</h1>
  <nav>
    <ul>
      <li>
        <a href="https://virtual-thom.github.io/archives" title="Home">
          <svg class="svg-icon" viewBox="0 0 20 20">
            <path d="M18.121,9.88l-7.832-7.836c-0.155-0.158-0.428-0.155-0.584,0L1.842,9.913c-0.262,0.263-0.073,0.705,0.292,0.705h2.069v7.042c0,0.227,0.187,0.414,0.414,0.414h3.725c0.228,0,0.414-0.188,0.414-0.414v-3.313h2.483v3.313c0,0.227,0.187,0.414,0.413,0.414h3.726c0.229,0,0.414-0.188,0.414-0.414v-7.042h2.068h0.004C18.331,10.617,18.389,10.146,18.121,9.88 M14.963,17.245h-2.896v-3.313c0-0.229-0.186-0.415-0.414-0.415H8.342c-0.228,0-0.414,0.187-0.414,0.415v3.313H5.032v-6.628h9.931V17.245z M3.133,9.79l6.864-6.868l6.867,6.868H3.133z"></path>
          </svg>
        </a>
      </li>
      <li>
        <a href="https://virtual-thom.github.io/archives/vos-commentaires-livre-d-or/" title="Commentaires - livre d'or">
          <svg class="svg-icon" viewBox="0 0 20 20">
            <path d="M17.657,2.982H2.342c-0.234,0-0.425,0.191-0.425,0.426v10.21c0,0.234,0.191,0.426,0.425,0.426h3.404v2.553c0,0.397,0.48,0.547,0.725,0.302l2.889-2.854h8.298c0.234,0,0.426-0.191,0.426-0.426V3.408C18.083,3.174,17.892,2.982,17.657,2.982M17.232,13.192H9.185c-0.113,0-0.219,0.045-0.3,0.124l-2.289,2.262v-1.96c0-0.233-0.191-0.426-0.425-0.426H2.767V3.833h14.465V13.192z M10,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.488-0.668,1.488-1.489C11.488,7.905,10.821,7.237,10,7.237 M10,9.364c-0.352,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C10.638,9.077,10.351,9.364,10,9.364 M14.254,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489s1.489-0.668,1.489-1.489C15.743,7.905,15.075,7.237,14.254,7.237 M14.254,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.352,0,0.639,0.287,0.639,0.638C14.893,9.077,14.605,9.364,14.254,9.364 M5.746,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.489-0.668,1.489-1.489C7.234,7.905,6.566,7.237,5.746,7.237 M5.746,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C6.384,9.077,6.096,9.364,5.746,9.364"></path>
          </svg>
        </a>
      </li>
      
      <li>
        <a href="https://virtual-thom.github.io/about" title="Curriculum Vitae Thom">
          <svg class="svg-icon" viewBox="0 0 20 20">
            <path d="M12.075,10.812c1.358-0.853,2.242-2.507,2.242-4.037c0-2.181-1.795-4.618-4.198-4.618S5.921,4.594,5.921,6.775c0,1.53,0.884,3.185,2.242,4.037c-3.222,0.865-5.6,3.807-5.6,7.298c0,0.23,0.189,0.42,0.42,0.42h14.273c0.23,0,0.42-0.189,0.42-0.42C17.676,14.619,15.297,11.677,12.075,10.812 M6.761,6.775c0-2.162,1.773-3.778,3.358-3.778s3.359,1.616,3.359,3.778c0,2.162-1.774,3.778-3.359,3.778S6.761,8.937,6.761,6.775 M3.415,17.69c0.218-3.51,3.142-6.297,6.704-6.297c3.562,0,6.486,2.787,6.705,6.297H3.415z"></path>
          </svg>
        </a>
      </li>
    </ul>
  </nav>
</header>

      <nav>
  <ul class="pagination">
      
    <li class="active">
      <span>1</span>
    </li>
      
    <li>
      <a
        href="/archives/page2">2</a>
    </li>
      
    <li>
      <a
        href="/archives/page3">3</a>
    </li>
      
    <li>
      <a
        href="/archives/page4">4</a>
    </li>
      
    <li>
      <a
        href="/archives/page5">5</a>
    </li>
      
    <li>
      <a
        href="/archives/page6">6</a>
    </li>
      
    <li>
      <a
        href="/archives/page7">7</a>
    </li>
      
    <li>
      <a
        href="/archives/page8">8</a>
    </li>
      
    <li>
      <a
        href="/archives/page9">9</a>
    </li>
      
    <li>
      <a
        href="/archives/page10">10</a>
    </li>
      
    <li>
      <a
        href="/archives/page11">11</a>
    </li>
      
    <li>
      <a
        href="/archives/page12">12</a>
    </li>
      
    <li>
      <a
        href="/archives/page13">13</a>
    </li>
      
    <li>
      <a
        href="/archives/page14">14</a>
    </li>
      
    <li>
      <a href="/page2" aria-label="Suivant">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
    
  </ul>
</nav>
<ul class="post-list post-list-with-type">
  
  <li>
    <a class="post-link" href="/archives/fonctions-vtom/">Fonctions VTOM</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/mise-a-jour-agents-vtom/">Mise à jour des Agents VTOM via "Gestion des paquets vtom"</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/compte-rendu-package-vtmanager/">Compte rendu package vtmanager</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/vtexport-parametresjson-modification-demultiplication-chaine-python/">vtexport parametresjson modèle de job démultiplication de chaine vtom</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/api-vtom-example/">Exemple script python API VTOM</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/operateurs-binaire-javascript/">Opérateurs binaire exemple concret</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/powershell-vtom-vtexport-xml/">Une autre façon de parcourir et rechercher des infos dans VTOM</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/list-date-communes-multiples-environnements-vtom/">Lister les dates VTOM liées à plusieurs environnements</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/profil-vtom-suppression-impossible/">Suppression profil vtom impossible</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/sorcellerie-accolade-bug/">Sorcellerie bug accolade dans param</a>
  </li>
  
</ul>


<div id="page-first-post">

  <div itemscope itemtype="http://schema.org/Article" class="post">

    <article class="post-content" itemprop="articleBody">
      <h1 itemprop="name about headline" class="post-title">Fonctions VTOM</h1>
      <p>Les fonctions VTOM, c’est une sacré dinguerie quand même, j’étais complètement passé à côté (sorties en v71 vers là à priori).<br />
<img src="https://virtual-thom.github.io/archives/assets/img/fonctions_vtom.png" alt="Fonctions VTOM" /></p>

<p>Quelques infos en vrac :</p>
<ul>
  <li>documentation ici pour la 721e : <a href="https://docs.absyss.com//vtom/721e/fr/Visual_TOM_Guide_Utilisateur/#formules-de-calcul">Formules de calcul et fonctions</a></li>
  <li>fonctionne avec les variables de contexte <code class="language-plaintext highlighter-rouge">={$mavardecontexte AST UPPER}</code> par ex.</li>
  <li>c’était déjà implémenté sur le user portail, ça vient de là</li>
  <li>ça fonctionne dans tous les champs textes de tous les types de Traitement (paramètres de jobs, ou champ dans un job de transfert par ex) sauf le champ du chemin de script externe (pour info, dans ce champ les contextes fonctionnent)</li>
  <li>c’est évalué par le vtapiserver (et non pas le moteur) avant d’être envoyé au client - à ce propos, j’ai essayé sur mon pc avec docker, il a fallu rajouter <code class="language-plaintext highlighter-rouge">[vtapiserver] hostname=apiserver</code> dans le vtom.ini pour que ça fonctionne, thx Duke</li>
</ul>

      (voir plus)
      <a class="post-link" href="/archives/fonctions-vtom/">Fonctions VTOM</a>
      <p class="post-meta">
        <time class="post-meta" itemprop="datePublished dateModified"
          datetime="2025-03-22T00:00:00+00:00">22-03-2025</time>
      </p>
    </article>
  </div>
</div>




















<ul class="post-list">
  
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/mise-a-jour-agents-vtom/">Mise à jour des Agents VTOM via "Gestion des paquets vtom"</a></h4>
      <p><p>On n’a plus aucune excuse pour ne plus avoir nos agents vtom à jour avec la livraison par package vtom.<br />
Ci-après une façon de faire et mes problèmes rencontrés avec leurs workaround vus avec Absyss pour certains, d’autres, tout bête, mais tellement insuportable, genre des alias sur linux en root rm = rm -i (merci Stephan pour l’idée de résolution)</p>
</p>
      
          <a href="/archives/mise-a-jour-agents-vtom/">Article complet ici</a>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/compte-rendu-package-vtmanager/">Compte rendu package vtmanager</a></h4>
      <p><p>Note à moi même, les données et comptes rendus des livraisons de paquets via vtom sont stockés sur le client dans le répertoire du manager/bin, dans le fichier db.dat sqlite3.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd $TOM_HOME/manager/bin
$ /bin/sqlite3 db.dat
SQLite version 3.7.17 2013-05-20 00:56:22
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite&gt; .tables
CRCS             PACKAGES         PROPERTIES       TASK_PROPERTIES
HISTO            PACKAGE_REPORTS  TASKS
sqlite&gt; select * from PACKAGE_REPORTS limit 1 ;
1|Visual TOM Agent|7.1.2c FR LINUX_X64|1719480454||I&gt; Verification du paquet : VT-CS-LINUX_X64.71.Z
I&gt; Contenu du paquet
 - install/ (0 )
 - install/boot_start_client.1 (116 )
 - install/boot_start_client.2 (65 )
....
</code></pre></div></div>
</p>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/vtexport-parametresjson-modification-demultiplication-chaine-python/">vtexport parametresjson modèle de job démultiplication de chaine vtom</a></h4>
      <p><p>J’en avais déjà discuté sur ce blog, certaines données, notamment dans le vtexport, sont “encodées” dirons-nous.<br />
Pas très pratique pour faire des modifications. Un peu mieux et en clair sur l’export xml en ce qui concerne les modèles de job vtom (type Transferts) mais ça reste une chaîne de caractère qui représente le job sous format JSON.</p>

<p>Allez ! petit exercice sympa que j’ai eu à faire récemment, démultiplication d’une chaine de jobs de transfert - basés sur Modèle de Job VTOM Transfert donc - sur  multibanques et multi-typedefichier.<br />
~ 300 jobs, hors de question que je conceptionne (immaculée) à la main.</p>

</p>
      
          <a href="/archives/vtexport-parametresjson-modification-demultiplication-chaine-python/">Article complet ici</a>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/api-vtom-example/">Exemple script python API VTOM</a></h4>
      <p><p>Petit script python pour donner un exemple de ce qu’il est désormais possible de faire avec les API VTOM. 
Le besoin : écrire dans un fichier texte la liste de tous les agents de plusieurs unités de soumission qui match un certain patern (ex tous les agents des “lot_1” de “win” commanençant par “PATCH”).</p>
</p>
      
          <a href="/archives/api-vtom-example/">Article complet ici</a>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/operateurs-binaire-javascript/">Opérateurs binaire exemple concret</a></h4>
      <p><p>Une vidéo de Grafikart m’a inspiré pour un besoin que j’avais en javascript pour stocker en base les horaires cron des utilisateurs pour déclencher des alarmes.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ex. Le nombre binaire 000000000000000001000000 est équivalent à l'entier 64.</span>
<span class="c1">// getChoices(64) donnera donc [ 7 ]</span>
<span class="c1">// Le nombre binaire 000000000000000001000001 est équivalent à l'entier 65.</span>
<span class="c1">// getChoices(65) donnera donc [ 1, 7 ]</span>
<span class="kd">function</span> <span class="nf">getChoices</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">choices</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="k">while </span><span class="p">(</span><span class="nx">number</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Si le bit de poids faible est 1, ajoutez la position à la liste des choix</span>
        <span class="k">if </span><span class="p">((</span><span class="nx">number</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">choices</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Décalez les bits vers la droite et passez à la position suivante</span>
        <span class="nx">number</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nx">position</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">choices</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// fonction inverse, on donne le tableau en entrée pour donner l'entier correspondants des heures</span>
<span class="c1">// getNumber( [1, 7] ) donnera 65</span>
<span class="kd">function</span> <span class="nf">getNumber</span><span class="p">(</span><span class="nx">choices</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">choices</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">position</span> <span class="o">=</span> <span class="nx">choices</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="c1">// Définir le bit à la position spécifiée à 1</span>
        <span class="nx">number</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="nx">position</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Les sources :</p>

<p><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Guide/Expressions_and_operators">Lien MDN Javascript</a>
<a href="https://grafikart.fr/tutoriels/binary-operator-flag-2171">Grafikart opérateurs binaires</a></p>

<section aria-labelledby="opérateurs_binaires"><h2 id="opérateurs_binaires"><a href="#opérateurs_binaires">Opérateurs binaires</a></h2><div class="section-content"><p>Un opérateur binaire traite les opérandes comme des suites de 32 bits (des zéros ou des uns) plutôt que comme des nombres décimaux, hexadécimaux et octaux. Ainsi, le nombre décimal 9 se représente en binaire comme 1001. Les opérateurs binaires effectuent leur opération sur des représentations binaires et renvoient des valeurs numériques.</p>
<p>Le tableau qui suit détaille les opérateurs binaires JavaScript.</p>
<figure class="table-container"><table>
  <thead>
    <tr>
      <th>Opérateur</th>
      <th>Utilisation</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="/fr/docs/Web/JavaScript/Reference/Operators/Bitwise_AND">ET binaire</a></td>
      <td><code>a &amp; b</code></td>
      <td>Renvoie un à chaque position pour laquelle les bits des deux opérandes valent un.</td>
    </tr>
    <tr>
      <td><a href="/fr/docs/Web/JavaScript/Reference/Operators/Bitwise_OR">OU binaire</a></td>
      <td><code>a | b</code></td>
      <td>Renvoie un zéro à chaque position pour laquelle les bits des deux opérandes valent zéro.</td>
    </tr>
    <tr>
      <td><a href="/fr/docs/Web/JavaScript/Reference/Operators/Bitwise_XOR">OU exclusif binaire</a></td>
      <td><code>a ^ b</code></td>
      <td>Renvoie un zéro à chaque position pour laquelle les bits sont les mêmes. [Renvoie un à chaque position où les bits sont différents.]</td>
    </tr>
    <tr>
      <td><a href="/fr/docs/Web/JavaScript/Reference/Operators/Bitwise_NOT">NON binaire</a></td>
      <td><code>~ a</code></td>
      <td>Inverse les bits de l'opérande.</td>
    </tr>
    <tr>
      <td><a href="/fr/docs/Web/JavaScript/Reference/Operators/Left_shift">Décalage à gauche</a></td>
      <td><code>a &lt;&lt; b</code></td>
      <td>Décale la représentation binaire de <code>a</code> de <code>b</code> bits vers la gauche, en ajoutant des zéros à droite.</td>
    </tr>
    <tr>
      <td><a href="/fr/docs/Web/JavaScript/Reference/Operators/Right_shift">Décalage à droite avec propagation du signe</a></td>
      <td><code>a &gt;&gt; b</code></td>
      <td>Décale la représentation binaire de <code>a</code> de <code>b</code> bits vers la droite, enlevant les bits en trop.</td>
    </tr>
    <tr>
      <td><a href="/fr/docs/Web/JavaScript/Reference/Operators/Unsigned_right_shift">Décalage à droite avec remplissage à zéro</a></td>
      <td><code>a &gt;&gt;&gt; b</code></td>
      <td>Décale la représentation binaire de <code>a</code> de <code>b</code> bits vers la droite, enlevant les bits en trop et en ajoutant des zéros à gauche.</td>
    </tr>
  </tbody>
</table></figure></div></section>

<section aria-labelledby="opérateurs_binaires_logiques"><h3 id="opérateurs_binaires_logiques"><a href="#opérateurs_binaires_logiques">Opérateurs binaires logiques</a></h3><div class="section-content"><p>Les opérateurs logiques binaires fonctionnent de la façon suivante&nbsp;:</p>
<ul>
  <li>Les opérandes sont convertis en entiers sur 32 bits. Pour les nombres dont la valeur binaire dépasse 32 bits, les bits les plus hauts sont abandonnés. Ainsi, l'entier suivant sur plus de 32 bits sera converti en entier sur 32 bits&nbsp;:
    <pre class="notranslate">Avant : 1110 0110 1111 1010 0000 0000 0000 0110 0000 0000 0001
Après :                1010 0000 0000 0000 0110 0000 0000 0001
</pre>
  </li>
  <li>Chaque bit du premier opérande est associé au bit correspondant du second opérande&nbsp;: le premier bit avec le premier bit, le second avec le second et ainsi de suite.</li>
  <li>L'opérateur est appliqué sur chaque paire ainsi constituée et le résultat est construit en binaire.</li>
</ul>
<p>Par exemple, la représentation binaire du nombre décimal <code>9</code> est <code>1001</code>, et celle du nombre décimal <code>15</code> est <code>1111</code>. Aussi, quand on utilise les opérateurs binaires sur ces valeurs, on a les résultats suivants&nbsp;:</p>
<figure class="table-container"><table>
  <thead>
    <tr>
      <th>Expression</th>
      <th>Résultat</th>
      <th>Description binaire</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>15 &amp; 9</code></td>
      <td><code>9</code></td>
      <td><code>1111 &amp; 1001 = 1001</code></td>
    </tr>
    <tr>
      <td><code>15 | 9</code></td>
      <td><code>15</code></td>
      <td><code>1111 | 1001 = 1111</code></td>
    </tr>
    <tr>
      <td><code>15 ^ 9</code></td>
      <td><code>6</code></td>
      <td><code>1111 ^ 1001 = 0110</code></td>
    </tr>
    <tr>
      <td><code>~15</code></td>
      <td><code>-16</code></td>
      <td><code>~ 0000 0000 … 0000 1111 = 1111 1111 … 1111 0000</code></td>
    </tr>
    <tr>
      <td><code>~9</code></td>
      <td><code>-10</code></td>
      <td><code>~ 0000 0000 … 0000 1001 = 1111 1111 … 1111 0110</code></td>
    </tr>
  </tbody>
</table></figure>
<p>On notera que tous les 32 bits sont inversés lors de l'utilisation de l'opérateur NON binaire et que les valeurs avec le bit le plus à gauche à 1 représentent des valeurs négatives (représentation en complément à deux). Aussi, l'évaluation de <code>~x</code> fournira la même valeur que <code>-x - 1</code>.</p></div></section>
<section aria-labelledby="opérateurs_de_décalage_binaire"><h3 id="opérateurs_de_décalage_binaire"><a href="#opérateurs_de_décalage_binaire">Opérateurs de décalage binaire</a></h3><div class="section-content"><p>Les opérateurs de décalage binaire utilisent deux opérandes&nbsp;: celui de gauche est la quantité sur laquelle effectuer le décalage et celui de droite indique le nombre de bits à décaler. La direction de l'opération de décalage dépend de l'opérateur utilisé.</p>
<p>Les opérateurs de décalage convertissent leurs opérandes en entiers sur 32 bits et renvoient un résultat de type <a href="/fr/docs/Web/JavaScript/Reference/Global_Objects/Number"><code>Number</code></a> ou <a href="/fr/docs/Web/JavaScript/Reference/Global_Objects/BigInt"><code>BigInt</code></a> selon la règle suivante&nbsp;: si l'opérande gauche est de type <a href="/fr/docs/Web/JavaScript/Reference/Global_Objects/BigInt"><code>BigInt</code></a>, la valeur de retour sera de type <a href="/fr/docs/Web/JavaScript/Reference/Global_Objects/BigInt"><code>BigInt</code></a> et sinon, la valeur de retour sera de type <a href="/fr/docs/Web/JavaScript/Reference/Global_Objects/Number"><code>Number</code></a>.</p>
<p>Les opérateurs de décalage sont listés dans le tableau suivant.</p>
<figure class="table-container"><table class="fullwidth-table">
  <caption>Opérateurs de décalage binaire</caption>
  <thead>
    <tr>
      <th scope="col">Opérateur</th>
      <th scope="col">Description</th>
      <th scope="col">Exemple</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="/fr/docs/Web/JavaScript/Reference/Operators/Left_shift">Décalage à gauche</a> (<code>&lt;&lt;</code>)</td>
      <td>Cet opérateur décale la valeur du premier opérande du nombre de bits indiqué vers la gauche. Les bits en trop sont abandonnés et des bits à 0 sont ajoutés sur la droite.</td>
      <td><code>9&lt;&lt;2</code> donne <code>36</code>, car <code>1001</code>, décalé de 2 bits à gauche vaut <code>100100</code> en binaire, ce qui correspond à <code>36</code> en décimal.</td>
    </tr>
    <tr>
      <td><a href="/fr/docs/Web/JavaScript/Reference/Operators/Right_shift">Décalage à droite avec propagation du signe</a> (<code>&gt;&gt;</code>)</td>
      <td>Cet opérateur décale la valeur du premier opérande du nombre de bits indiqué vers la droite. Les bits en trop à droite sont abandonnés. Des copies du bit le plus à gauche sont ajoutés sur la gauche.</td>
      <td><code>9&gt;&gt;2</code> donne <code>2</code>, car <code>1001</code> décalé de 2 bits à droite vaut <code>10</code> en binaire, ce qui correspond à <code>2</code> en décimal. De même, <code>-9&gt;&gt;2</code> donne <code>-3</code>, car le signe est conservé.</td>
    </tr>
    <tr>
      <td><a href="/fr/docs/Web/JavaScript/Reference/Operators/Unsigned_right_shift">Décalage à droite avec remplissage à zéro</a> (<code>&gt;&gt;&gt;</code>)</td>
      <td>Cet opérateur décale la valeur du premier opérande du nombre de bits indiqué vers la droite. Les bits en trop à droite sont abandonnés. Des bits à zéro sont ajoutés sur la gauche.</td>
      <td><code>19&gt;&gt;&gt;2</code> donne <code>4</code>, car <code>10011</code> décalé de deux bits à droite devient <code>100</code> en binaire, ce qui vaut <code>4</code> en décimal. Pour les valeurs positives, le décalage à droite avec remplissage à zéro et le décalage à droite avec propagation du signe fourniront le même résultat.</td>
    </tr>
  </tbody>
</table></figure></div></section>
</p>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/powershell-vtom-vtexport-xml/">Une autre façon de parcourir et rechercher des infos dans VTOM</a></h4>
      <p><p>Ex. Dates non utilisées dans aucun env</p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Charger le fichier XML dans une variable</span><span class="w">
</span><span class="p">[</span><span class="n">xml</span><span class="p">]</span><span class="nv">$xml</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-Content</span><span class="w"> </span><span class="s2">"vtexport.xml"</span><span class="w">

</span><span class="c"># Extraire tous les noms de dates</span><span class="w">
</span><span class="nv">$dateNames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$xmlContent</span><span class="o">.</span><span class="nf">Domain</span><span class="o">.</span><span class="nf">Dates</span><span class="o">.</span><span class="nf">Date</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ForEach-Object</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="bp">$_</span><span class="o">.</span><span class="nf">name</span><span class="w"> </span><span class="p">}</span><span class="w">

</span><span class="c"># Extraire tous les noms utilisés</span><span class="w">
</span><span class="nv">$usedNames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$xmlContent</span><span class="o">.</span><span class="nf">Domain</span><span class="o">.</span><span class="nf">Environments</span><span class="o">.</span><span class="nf">Environment</span><span class="o">.</span><span class="nf">UsedDates</span><span class="o">.</span><span class="nf">names</span><span class="w"> </span><span class="o">-split</span><span class="w"> </span><span class="s1">' '</span><span class="w">

</span><span class="c"># Trouver les noms de dates qui ne sont pas utilisés</span><span class="w">
</span><span class="nv">$unusedNames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$dateNames</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Where-Object</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="bp">$_</span><span class="w"> </span><span class="nt">-notin</span><span class="w"> </span><span class="nv">$usedNames</span><span class="w"> </span><span class="p">}</span><span class="w">

</span><span class="c"># Afficher les noms non utilisés</span><span class="w">
</span><span class="nv">$unusedNames</span><span class="w">
</span></code></pre></div></div>
</p>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/list-date-communes-multiples-environnements-vtom/">Lister les dates VTOM liées à plusieurs environnements</a></h4>
      <p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$data = vtlist env/date | ConvertFrom-Csv -Delimiter "`t" -Header ENV, DATE

$groupedData = $data | Group-Object DATE | ForEach-Object {
    [PSCustomObject]@{
        DATE = $_.Name
        ENV = ($_.Group.ENV | Sort-Object -Unique) -join ', '
    }
}

$sortedData = $groupedData | Sort-Object { ($_.ENV.Split(',').Count) } -Descending

$filteredData = $sortedData | Where-Object { ($_.ENV.Split(',').Count) -ge 2 }

$filteredData

</code></pre></div></div>
</p>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/profil-vtom-suppression-impossible/">Suppression profil vtom impossible</a></h4>
      <p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vtdelprofile /name groupe_jedi
.\cs\jsrv_cs_profile.c (364) - jsrv_deleteProfile(PRO0a7700fxx0002cd65xxfd6c9300000000) errorLa commande de suppression de profil a echoue.
</code></pre></div></div>
<p>Ou que dans l’IHM vous essayez de supprimer le profil qui n’est lié à aucun compte utilisateur mais que ça ne fait rien, cherchez du côté des télédiffusions.<br />
Il est probable que des lots de télédif soient liés à ce profil.</p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">vttdf</span><span class="w"> </span><span class="nx">/list</span><span class="w"> </span><span class="nx">kit</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kr">foreach</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s2">"vttdf /del kit /name </span><span class="se">`"</span><span class="si">$(</span><span class="p">(</span><span class="bp">$_</span><span class="w"> </span><span class="o">-split</span><span class="w"> </span><span class="s2">"</span><span class="se">`t</span><span class="s2">"</span><span class="si">)</span><span class="s2">[0])</span><span class="se">`"</span><span class="s2"> /profile </span><span class="se">`"</span><span class="si">$(</span><span class="p">(</span><span class="bp">$_</span><span class="w"> </span><span class="o">-split</span><span class="w"> </span><span class="s2">"</span><span class="se">`t</span><span class="s2">"</span><span class="si">)</span><span class="s2">[1])</span><span class="se">`"</span><span class="s2">"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="c"># vous grep les lots avec votre profil en question</span><span class="w">
</span><span class="n">vtdelprofile</span><span class="w"> </span><span class="nx">/name</span><span class="w"> </span><span class="nx">groupe_jedi</span><span class="w">
</span><span class="n">La</span><span class="w"> </span><span class="nx">commande</span><span class="w"> </span><span class="nx">de</span><span class="w"> </span><span class="nx">suppression</span><span class="w"> </span><span class="nx">de</span><span class="w"> </span><span class="nx">profil</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">abouti.</span><span class="w">
</span></code></pre></div></div>
</p>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/sorcellerie-accolade-bug/">Sorcellerie bug accolade dans param</a></h4>
      <p><p>v7.1.1b5<br />
Petit bug si <code class="language-plaintext highlighter-rouge">{</code> ouvrante dans un paramètre vtom (genre un mdp, oui je sais c’est mal). Quand vtom envoie dans la queue, on retrouve une accolade fermante } (en trop du coup).<br />
Sorcellerie de dev chez Absyss, palliatif qui fonctionne en tous cas, en attendant de résoudre, rajouter <code class="language-plaintext highlighter-rouge">E[]|</code> devant le paramètre en question.<br />
Ex.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Dans l'onglet Param du job VTOM :
/mdp:"bonjour{tralala"

== bug on retrouve au final dans la queue / script :
/mdp:"bonjour{tralala"}

Palliatif :
E[]|/mdp:"bonjour{tralala"
</code></pre></div></div>
<p>D’ailleurs si vous voulez identifier vos jobs concernés, c’est un peu pénible car beaucoup de jobs avec param {} notamment pour les ressources. Pas si évident à chercher. Sinon <code class="language-plaintext highlighter-rouge">vtexport -x</code> et chercher la pattern regex <code class="language-plaintext highlighter-rouge">^.*{[^}]+$</code>, vous aurez les “test {“ des formules de planning, vous excluez ça et vous avez vos vraies lignes.</p>
</p>
      
    </div>

  </li>
  
  
</ul>
<!-- Pagination links -->
<nav>
  <ul class="pagination">
      
    <li class="active">
      <span>1</span>
    </li>
      
    <li>
      <a
        href="/archives/page2">2</a>
    </li>
      
    <li>
      <a
        href="/archives/page3">3</a>
    </li>
      
    <li>
      <a
        href="/archives/page4">4</a>
    </li>
      
    <li>
      <a
        href="/archives/page5">5</a>
    </li>
      
    <li>
      <a
        href="/archives/page6">6</a>
    </li>
      
    <li>
      <a
        href="/archives/page7">7</a>
    </li>
      
    <li>
      <a
        href="/archives/page8">8</a>
    </li>
      
    <li>
      <a
        href="/archives/page9">9</a>
    </li>
      
    <li>
      <a
        href="/archives/page10">10</a>
    </li>
      
    <li>
      <a
        href="/archives/page11">11</a>
    </li>
      
    <li>
      <a
        href="/archives/page12">12</a>
    </li>
      
    <li>
      <a
        href="/archives/page13">13</a>
    </li>
      
    <li>
      <a
        href="/archives/page14">14</a>
    </li>
      
    <li>
      <a href="/page2" aria-label="Suivant">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
    
  </ul>
</nav>

      <footer id="site-footer">
    <div>&copy;<a href="https://github.com/virtual-thom/" title="Github Virtual-Thom">Virtual-Thom</a></div>
    <div>
            <a href="https://virtual-thom.github.io/archives/plan" title="Plan du site">sitemap</a> | <a href="https://virtual-thom.github.io/about" rel="publisher author" title="Curriculum vitae Thom">A propos</a>
    </div>
    <div>
        <a id="goto-site-header" href="#site-header" title="Retourner au début">&uArr; Top</a>
    </div>
    <div id="footer-disclaimer">
        <p>Avertissement : vous ne devez pas prendre pour argent comptant le contenu de ce site. Testez toujours la solution en environnement de test.</p>
        <p>Malgré le sérieux que je m'efforce de mettre dans le contenu de ces billets, je ne pourrai être tenu responsable d'éventuelles erreurs que cela pourrait engendrer.</p>
    </div>
    <div>
        <a class="hidden" href="https://virtual-thom.github.io/archives/sitemap.xml" title="SiteMap">sitemap</a>
    </div>
</footer>

    </div>
  </body>

</html>