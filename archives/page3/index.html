<!DOCTYPE html>
<html lang="fr">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="apple-touch-icon" href="https://virtual-thom.github.io/archives/apple-touch-icon.png">
  <link rel="icon" href="https://virtual-thom.github.io/archives/favicon.ico" />
  <!-- Remplacé par Jekyll SEO (sinon apparait en double)
  <title>Virtual-Thom | Blog-notes VTOM et informatique</title>
  <meta name="description" content="Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps">
  --> 
  
  <link rel="canonical" href="https://virtual-thom.github.io/archives/page3/">
  
  <link rel="stylesheet" media="screen" href="https://virtual-thom.github.io/archives/assets/main.css">
  
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Page 3 of 14 for Virtual-Thom Blog-notes VTOM et informatique | Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Virtual-Thom Blog-notes VTOM et informatique" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps" />
<meta property="og:description" content="Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps" />
<link rel="canonical" href="https://virtual-thom.github.io/archives/page3/" />
<meta property="og:url" content="https://virtual-thom.github.io/archives/page3/" />
<meta property="og:site_name" content="Virtual-Thom Blog-notes VTOM et informatique" />
<meta property="og:type" content="website" />
<link rel="prev" href="https://virtual-thom.github.io/archives/page2" />
<link rel="next" href="https://virtual-thom.github.io/archives/page4" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Virtual-Thom Blog-notes VTOM et informatique" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps","headline":"Virtual-Thom Blog-notes VTOM et informatique","url":"https://virtual-thom.github.io/archives/page3/"}</script>
<!-- End Jekyll SEO tag -->

  
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z8Y7902GRV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z8Y7902GRV');
</script>


  <body>
    <div class="container">
      <header id="site-header">
  <h1>Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps</h1>
  <nav>
    <ul>
      <li>
        <a href="https://virtual-thom.github.io/archives" title="Home">
          <svg class="svg-icon" viewBox="0 0 20 20">
            <path d="M18.121,9.88l-7.832-7.836c-0.155-0.158-0.428-0.155-0.584,0L1.842,9.913c-0.262,0.263-0.073,0.705,0.292,0.705h2.069v7.042c0,0.227,0.187,0.414,0.414,0.414h3.725c0.228,0,0.414-0.188,0.414-0.414v-3.313h2.483v3.313c0,0.227,0.187,0.414,0.413,0.414h3.726c0.229,0,0.414-0.188,0.414-0.414v-7.042h2.068h0.004C18.331,10.617,18.389,10.146,18.121,9.88 M14.963,17.245h-2.896v-3.313c0-0.229-0.186-0.415-0.414-0.415H8.342c-0.228,0-0.414,0.187-0.414,0.415v3.313H5.032v-6.628h9.931V17.245z M3.133,9.79l6.864-6.868l6.867,6.868H3.133z"></path>
          </svg>
        </a>
      </li>
      <li>
        <a href="https://virtual-thom.github.io/archives/vos-commentaires-livre-d-or/" title="Commentaires - livre d'or">
          <svg class="svg-icon" viewBox="0 0 20 20">
            <path d="M17.657,2.982H2.342c-0.234,0-0.425,0.191-0.425,0.426v10.21c0,0.234,0.191,0.426,0.425,0.426h3.404v2.553c0,0.397,0.48,0.547,0.725,0.302l2.889-2.854h8.298c0.234,0,0.426-0.191,0.426-0.426V3.408C18.083,3.174,17.892,2.982,17.657,2.982M17.232,13.192H9.185c-0.113,0-0.219,0.045-0.3,0.124l-2.289,2.262v-1.96c0-0.233-0.191-0.426-0.425-0.426H2.767V3.833h14.465V13.192z M10,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.488-0.668,1.488-1.489C11.488,7.905,10.821,7.237,10,7.237 M10,9.364c-0.352,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C10.638,9.077,10.351,9.364,10,9.364 M14.254,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489s1.489-0.668,1.489-1.489C15.743,7.905,15.075,7.237,14.254,7.237 M14.254,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.352,0,0.639,0.287,0.639,0.638C14.893,9.077,14.605,9.364,14.254,9.364 M5.746,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.489-0.668,1.489-1.489C7.234,7.905,6.566,7.237,5.746,7.237 M5.746,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C6.384,9.077,6.096,9.364,5.746,9.364"></path>
          </svg>
        </a>
      </li>
      
      <li>
        <a href="https://virtual-thom.github.io/about" title="Curriculum Vitae Thom">
          <svg class="svg-icon" viewBox="0 0 20 20">
            <path d="M12.075,10.812c1.358-0.853,2.242-2.507,2.242-4.037c0-2.181-1.795-4.618-4.198-4.618S5.921,4.594,5.921,6.775c0,1.53,0.884,3.185,2.242,4.037c-3.222,0.865-5.6,3.807-5.6,7.298c0,0.23,0.189,0.42,0.42,0.42h14.273c0.23,0,0.42-0.189,0.42-0.42C17.676,14.619,15.297,11.677,12.075,10.812 M6.761,6.775c0-2.162,1.773-3.778,3.358-3.778s3.359,1.616,3.359,3.778c0,2.162-1.774,3.778-3.359,3.778S6.761,8.937,6.761,6.775 M3.415,17.69c0.218-3.51,3.142-6.297,6.704-6.297c3.562,0,6.486,2.787,6.705,6.297H3.415z"></path>
          </svg>
        </a>
      </li>
    </ul>
  </nav>
</header>

      <nav>
  <ul class="pagination">
    
    <li>
      <a href="/page2" class="Précédant">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>
      
    <li>
      <a href="/archives/index.html">1</a>
    </li>
      
    <li>
      <a
        href="/archives/page2">2</a>
    </li>
      
    <li class="active">
      <span>3</span>
    </li>
      
    <li>
      <a
        href="/archives/page4">4</a>
    </li>
      
    <li>
      <a
        href="/archives/page5">5</a>
    </li>
      
    <li>
      <a
        href="/archives/page6">6</a>
    </li>
      
    <li>
      <a
        href="/archives/page7">7</a>
    </li>
      
    <li>
      <a
        href="/archives/page8">8</a>
    </li>
      
    <li>
      <a
        href="/archives/page9">9</a>
    </li>
      
    <li>
      <a
        href="/archives/page10">10</a>
    </li>
      
    <li>
      <a
        href="/archives/page11">11</a>
    </li>
      
    <li>
      <a
        href="/archives/page12">12</a>
    </li>
      
    <li>
      <a
        href="/archives/page13">13</a>
    </li>
      
    <li>
      <a
        href="/archives/page14">14</a>
    </li>
      
    <li>
      <a href="/page4" aria-label="Suivant">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
    
  </ul>
</nav>
<ul class="post-list post-list-with-type">
  
  <li>
    <a class="post-link" href="/archives/acces-console-oracle-cloud/">Accès console Oracle Cloud</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/apercu-vtom/">Aperçu VTOM - The Eye of the Tiger</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/lancement-site-alerte-gel/">Lancement site Alerte Gel par email gratuit</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/vtom-alarme-relance-auto/">Relance auto et Alarme VTOM</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/vtaddunit-par-os/">vtaddunit par OS</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/compute-vps-server-free-oracle/">Serveur / VM Gratuit - compute free tier Oracle Cloud</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/statistiques-lentes-freeze-vtom/">Statistiques VTOM Lenteurs</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/forcer-encours-vtom/">Forcer à ENCOURS un job</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/api-rest-vtom-v6/">API Rest VTOM</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/script-ps1-purge-modifications-temporaires-vtom/">Purge des modifications temporaires VTOM</a>
  </li>
  
</ul>


<div id="page-first-post">

  <div itemscope itemtype="http://schema.org/Article" class="post">

    <article class="post-content" itemprop="articleBody">
      <h1 itemprop="name about headline" class="post-title">Accès console Oracle Cloud</h1>
      <p>Si comme moi, vous avez mis à jour la version Ubuntu 22.04.1 LTS Jammy, et que votre clé ssh ne fonctionne plus (“Server refused our key”), c’est que la clé SSH RSA n’est plus assez “sécurisée” d’après leur nouvelle norme.<br />
Il faut créer une nouvelle paire de clé SSH ed25519. Reste à coller le nouveau .pub dans votre <code class="language-plaintext highlighter-rouge">authorized_keys</code>, encore faut-il avoir accès à la console de l’instance.</p>

<p>Voici comment faire pour débugger et ouvrir une session temporaire via l’interface admin d’Oracle Cloud.</p>

<p>Lancer une invite de commande (pour linux/mac pas de problème, sur windows, powershell 7.x semble mieux fonctionner)</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen
# laisser tout par défaut sans passphrase
# repérer le chemin du fichier id_rsa.pub
# sur windows normalement : %userprofile%\.ssh\id_rsa.pub
</code></pre></div></div>

<p>Copier le contenu de <code class="language-plaintext highlighter-rouge">id_rsa.pub</code> et le coller dans :<br />
Compute &gt; Instances &gt; Instance details (de votre instance à accéder) &gt; Console connection (dans Resources en bas à gauche) &gt; Create local connection &gt; Paste public key<br />
Une nouvelle ligne est créée, menu (…) &gt; “Copy serial console connection for Linux/Mac”</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># ça devrait ressembler à ça :
ssh -o ProxyCommand='ssh -W %h:%p -p 443 ocid1.instanceconsoleconnection.oc1.eu-marseille-1.xxxxxxxxxxxxxxxxxq@instance-console.eu-marseille-1.oci.oraclecloud.com' ocid1.instance.oc1.eu-marseille-1.xxxxxxxxxxxxxxxxxxxxx
</code></pre></div></div>
<p>Coller dans l’invite de commande et normalement c’est OK (répondre yes)</p>

<p>Une fois sur la console de votre instance, coller la nouvelle clé ed25519 pub dans votre <code class="language-plaintext highlighter-rouge">~/.ssh/authorized_keys</code></p>

<p><img src="https://virtual-thom.github.io/archives/wp-content/uploads/oracle_cloud_console_connection.png" alt="oracle_cloud_console_connection.png" /></p>

      (voir plus)
      <a class="post-link" href="/archives/acces-console-oracle-cloud/">Accès console Oracle Cloud</a>
      <p class="post-meta">
        <time class="post-meta" itemprop="datePublished dateModified"
          datetime="2022-08-06T20:00:00+00:00">06-08-2022</time>
      </p>
    </article>
  </div>
</div>




















<ul class="post-list">
  
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/apercu-vtom/">Aperçu VTOM - The Eye of the Tiger</a></h4>
      <p><p>Vous connaissez tous CTRL + Survol App ou Job pour avoir un aperçu des caractéristiques.<br />
Un collègue m’a fait découvrir “The Eye of the tiger”, le bouton “Aperçu” dans la barre des tâches de l’IHM. So nice.</p>

<p><img src="https://virtual-thom.github.io/archives/wp-content/uploads/apercu_vtom.jpg" alt="Aperçu VTOM" /></p>

<p>Notre version : v6.5.1l</p>
</p>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/lancement-site-alerte-gel/">Lancement site Alerte Gel par email gratuit</a></h4>
      <p><p>Je viens de lancer un site pour être alerté en cas de gel par email, si ça vous intéresse pour le potager ou autre, c’est gratuit ici : <a href="https://alerte-gel.net/">https://alerte-gel.net/</a></p>

<p><img src="https://virtual-thom.github.io/archives/wp-content/uploads/alerte-gel_capture.png" alt="Alerte Gel par email gratuit" /></p>
</p>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/vtom-alarme-relance-auto/">Relance auto et Alarme VTOM</a></h4>
      <p><p>Changement de comportement entre v5.8 et v6.5.1l sur les relances automatiques de job et les alarmes.</p>

<p><img src="https://virtual-thom.github.io/archives/wp-content/uploads/relance_auto_alarme.png" alt="Documentation VTOM - alarmes" /></p>

<p>On utilise les alarmes pour créer des tickets incidents en rajoutant une ligne txt spécifique dans un fichier spécifique scruté par notre superviseur.</p>

<p>L’ancien mode où l’alarme ne se déclenchait que sur le dernier RETRY en cas d’erreur me convenait mieux car on ne créait de ticket incident que dans ces cas-là. Les premières exécutions EN_ERREUR n’étaient pas remontées et c’était très bien (dans mon cas).<br />
J’ai bien pensé à mettre le déclenchement alarme si statut est en erreur depuis 5 sec par ex mais ça poserait deux soucis :</p>
<ul>
  <li>si job finit à J+1 par ex (le statut en erreur ne resterait pas assez lgt avant la bascule de la date)</li>
  <li>si le job a une tempo entre deux relances supérieure</li>
</ul>

<p>J’ai remarqué que les relances auto étaient EN_DIFFICULTE dans le vtlist jobs_last_exec.</p>

<p>Palliatif / bricollage à définir dans le corps du script de l’alarme :</p>
<pre><code class="language-cmd">FOR /F "tokens=* USEBACKQ" %%g IN (`powershell.exe -NoProfile -NoLogo -Command "( (vtlist jobs_last_exec -v -f {VT_JOB_FULLNAME}) -split '\s+')[3]"`) DO (
  IF "%%g" == "EN_ERREUR" (
    rem Do stuff here me echo in log file
    echo vtom: Error_Job_{VT_JOB_FULLNAME} - %date% %time:~0,5%[Inst]TECH[Inst] [Detail]  [Detail] [Sev]2[Sev] &gt;&gt; D:\VTOM\vtom_err.log
  )
)

</code></pre>

</p>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/vtaddunit-par-os/">vtaddunit par OS</a></h4>
      <p><p>Pense-bête pour ajouter tous les agents d’un certain type d’OS dans une unité de soumission</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># vtmachine, vtaddunit 6.5.1l
$portAgent=30004
vtmachine |Select-String $portAgent | convertfrom-csv -Delimiter "|" -Header "blank","Name","Hostname","Iv4","Agent Port","Agent SSL","Agent Status","OS","Agent Version" | Where-Object { $_.OS -match "^Win" } | ForEach-Object { &amp; vtaddunit.exe /name="ALL_WIN" /mode="M" /agent="+$($_.Name.trim())" }
vtmachine |Select-String $portAgent | convertfrom-csv -Delimiter "|" -Header "blank","Name","Hostname","Iv4","Agent Port","Agent SSL","Agent Status","OS","Agent Version" | Where-Object { $_.OS -match "^Lin" } | ForEach-Object { &amp; vtaddunit.exe /name="ALL_LIN" /mode="M" /agent="+$($_.Name.trim())" }
vtmachine |Select-String $portAgent | convertfrom-csv -Delimiter "|" -Header "blank","Name","Hostname","Iv4","Agent Port","Agent SSL","Agent Status","OS","Agent Version" | Where-Object { $_.OS -match "^AIX" } | ForEach-Object { &amp; vtaddunit.exe /name="ALL_AIX" /mode="M" /agent="+$($_.Name.trim())" }
</code></pre></div></div>
</p>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/compute-vps-server-free-oracle/">Serveur / VM Gratuit - compute free tier Oracle Cloud</a></h4>
      <p><p>Pour ceux qui cherchent du compute gratos mais correct, j’ai trouvé <a href="https://www.youtube.com/watch?v=g7sP33QtuxM&amp;ab_channel=IdeaSpot">par hasard</a> et testé la solution <a href="https://www.oracle.com/fr/cloud/free/#always-free">free tier de chez Oracle Cloud</a>.<br />
C’est vraiment bien, stable, puissant 4 Proc 24Go Mem, généreux 47Go Disk (mais à priori 2 volume block, au total 200Go). Seul bémol, c’est de l’arm64. M’enfin, couplé à une gestion DNS (chez moi <a href="https://www.noip.com/">no-ip.com</a>, dispose de sous-domaine gratos), c’est parfait pour héberger mon serveur de dev.<br />
J’ai testé aussi l’<a href="https://www.aapanel.com/reference.html">aapnel</a> comme dans le <a href="https://www.youtube.com/watch?v=g7sP33QtuxM&amp;ab_channel=IdeaSpot">tuto</a>. Pas mal, c’est pratique, ça évite pas mal de conf Apache et SSL Let’s Encrypt (du moins c’est super simple par l’interface).<br />
Gros bémol aussi à l’heure où j’écris ces lignes : le package npm Parcel 2 ne fonctionne pas. Le build nécessite GLIBC 2.29 et l’OS oracle 8 linux ne dispoe que du GLIBC 2.28. Tester avec une image Ubuntu 20.04 ==&gt; c’est ok :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ubuntu@instance-xxxx:~/test$ npx parcel build index.html
✨ Built in 716ms
dist/index.html    7 B    258ms
</code></pre></div></div>

<p>J’ai aussi testé un serveur Express en nodeJS, ça fonctionne très bien.</p>

<p>Bon même si je n’y suis allé que pour le compute, le free tier propose aussi d’autres features gratuites à vie (bdd, APEX, etc) :<br />
<img src="https://virtual-thom.github.io/archives/wp-content/uploads/free_tier_oracle_cloud.png" alt="!Free Tier Oracle Cloud" /></p>
</p>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/statistiques-lentes-freeze-vtom/">Statistiques VTOM Lenteurs</a></h4>
      <p><p>S’il y a encore des irréductibles Gaulois en v5.8 (ou moins de v6 - han je suis choqué), vous avez peut-être remarqué que votre base grossit, et les requêtes sur les statistiques VTOM (purges ou visu) sont très lentes et / ou freezent l’IHM - malgré vos purges <code class="language-plaintext highlighter-rouge">vtstools</code> régulières.</p>

<p>Solution : faire un petit réinit de la base en bonne et dûe forme. Franchement ça change la vie. (passé d’une base de 16Go à moins de 2Go, plus de freeze, requêtes instant)</p>
<ul>
  <li>arrêt des moteurs,</li>
  <li>vtbackup,</li>
  <li>stop services vtserver et vtsgbd,</li>
  <li>save du rep BASES actuel - ceinture et bretelles,</li>
  <li>suppression BASES/*,</li>
  <li>copie du contenu vtbackup/ dans BASES/</li>
  <li>démarrage vtsgbd (attendre dans les logs traces que la resto soit ok)</li>
  <li>démarrage vtserver</li>
  <li>démarrage des moteurs</li>
</ul>

<p>Sinon, en v6, ils ont rajouté l’option <code class="language-plaintext highlighter-rouge">/clean</code> dans <code class="language-plaintext highlighter-rouge">vtstools</code> :</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> /clean                  (ou -c) libere l'espace disque recuperable   all | date_count | job | job_occ | current
                         plusieurs valeurs peuvent etre saisies en    | realtime
                         les separant par une virgule
</code></pre></div></div>
</p>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/forcer-encours-vtom/">Forcer à ENCOURS un job</a></h4>
      <p><p>Note à moi-même, +13 ans plus tard je découvre toujours des subtilités dans VTOM.</p>

<p>Vous n’êtes pas sans savoir que l’action “Forcer à ENCOURS” squeeze toutes les contraintes d’heures, planning, ressources, liens, modes d’exécution etc.<br />
Ou pas, en tous cas, pas le mode Simulation du job. J’étais pourtant sûr de mon coup mais non. Autant, on peut forcer à ENCOURS un job à STOP et il s’exécutera, autant un job à Simu, niet (il passera à TERMINE sans exécution).</p>
</p>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/api-rest-vtom-v6/">API Rest VTOM</a></h4>
      <p><p>A partir de la v6.4, Absyss met à disposition des APIs REST officielles, et soutenues.</p>

<p>Si vous connaissez les VITO (bande de veinards) et les groupes de travail des tables rondes, vous savez certainement que l’évolution du produit se dirigie vers une interface full web. Et qui dit interface web, dit API Rest en arrière plan.<br />
Et moi qui croyais que les API avaient été faites pour nos beaux yeux ! (bon si ça nous fait plaisir, ça ne mange pas de pain :))</p>

<p>Si vous suivez mon blog, vous devez connaître les API non officielles du web access. Déjà bien pratiques, elles n’avaient qu’un but à la base, faire fonctionner la partie Web Access proposée par Absyss.<br />
Nous dansions alors sur un seul pied quant à les utiliser en PROD, puisque non soutenues et non prévues pour ce que nous voulions en faire (bien souvent des outils perso web ou script pour requêter la base plutôt que d’utiliser les vtlist, vtstools ou autres).<br />
Et alors là, pour le coup, ils ont fait fort. <br />
Nouveau process dédié (Absyss API REST: vtapiserver), une documentation visuelle avec Swagger UI, des clés de sécurité avec des stratégies poussées (chaque clé n’a accès qu’à ce qu’on veut et a une portée bien définie - bon on peut tout mettre aussi)</p>

<p>Le billet ne sera donc pas très poussé car toute la doc’ est déjà sur le produit. Je vais juste vous montrer comment rajouter une clé et commencer à faire quelques requêtes.</p>
</p>
      
          <a href="/archives/api-rest-vtom-v6/">Article complet ici</a>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/script-ps1-purge-modifications-temporaires-vtom/">Purge des modifications temporaires VTOM</a></h4>
      <p><p>Script powershell ps1 de Purge des modifications temporaires (applications et jobs) qui sont déjà passées -3 jours.</p>
<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">foreach</span><span class="p">(</span><span class="nv">$type</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="s2">"job"</span><span class="p">){</span><span class="w">
	</span><span class="nv">$items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">tlist</span><span class="w"> </span><span class="s2">"</span><span class="si">$(</span><span class="nv">$type</span><span class="si">)</span><span class="s2">s_mdf"</span><span class="w">
	</span><span class="kr">foreach</span><span class="w"> </span><span class="p">(</span><span class="nv">$item</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nv">$items</span><span class="p">){</span><span class="w">
		</span><span class="nv">$dateFinMdf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">datetime</span><span class="p">]::</span><span class="n">parseexact</span><span class="p">(</span><span class="nv">$item</span><span class="o">.</span><span class="nf">split</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)[</span><span class="nt">-1</span><span class="p">],</span><span class="w"> </span><span class="s2">"dd-MM-yyyy"</span><span class="p">,</span><span class="bp">$null</span><span class="p">)</span><span class="w">
		</span><span class="kr">if</span><span class="p">(</span><span class="nv">$dateFinMdf</span><span class="w"> </span><span class="o">-lt</span><span class="w"> </span><span class="p">(</span><span class="n">get-date</span><span class="p">)</span><span class="o">.</span><span class="nf">AddDays</span><span class="p">(</span><span class="nt">-3</span><span class="p">)){</span><span class="w">
			</span><span class="o">&amp;</span><span class="w"> </span><span class="n">vtdel</span><span class="err">$</span><span class="p">(</span><span class="nv">$type</span><span class="p">)</span><span class="w"> </span><span class="n">/name</span><span class="w"> </span><span class="s2">"</span><span class="nv">$item</span><span class="s2">"</span><span class="w">
		</span><span class="p">}</span><span class="w">
	</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
</p>
      
    </div>

  </li>
  
  
</ul>
<!-- Pagination links -->
<nav>
  <ul class="pagination">
    
    <li>
      <a href="/page2" class="Précédant">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>
      
    <li>
      <a href="/archives/index.html">1</a>
    </li>
      
    <li>
      <a
        href="/archives/page2">2</a>
    </li>
      
    <li class="active">
      <span>3</span>
    </li>
      
    <li>
      <a
        href="/archives/page4">4</a>
    </li>
      
    <li>
      <a
        href="/archives/page5">5</a>
    </li>
      
    <li>
      <a
        href="/archives/page6">6</a>
    </li>
      
    <li>
      <a
        href="/archives/page7">7</a>
    </li>
      
    <li>
      <a
        href="/archives/page8">8</a>
    </li>
      
    <li>
      <a
        href="/archives/page9">9</a>
    </li>
      
    <li>
      <a
        href="/archives/page10">10</a>
    </li>
      
    <li>
      <a
        href="/archives/page11">11</a>
    </li>
      
    <li>
      <a
        href="/archives/page12">12</a>
    </li>
      
    <li>
      <a
        href="/archives/page13">13</a>
    </li>
      
    <li>
      <a
        href="/archives/page14">14</a>
    </li>
      
    <li>
      <a href="/page4" aria-label="Suivant">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
    
  </ul>
</nav>

      <footer id="site-footer">
    <div>&copy;<a href="https://github.com/virtual-thom/" title="Github Virtual-Thom">Virtual-Thom</a></div>
    <div>
            <a href="https://virtual-thom.github.io/archives/plan" title="Plan du site">sitemap</a> | <a href="https://virtual-thom.github.io/about" rel="publisher author" title="Curriculum vitae Thom">A propos</a>
    </div>
    <div>
        <a id="goto-site-header" href="#site-header" title="Retourner au début">&uArr; Top</a>
    </div>
    <div id="footer-disclaimer">
        <p>Avertissement : vous ne devez pas prendre pour argent comptant le contenu de ce site. Testez toujours la solution en environnement de test.</p>
        <p>Malgré le sérieux que je m'efforce de mettre dans le contenu de ces billets, je ne pourrai être tenu responsable d'éventuelles erreurs que cela pourrait engendrer.</p>
    </div>
    <div>
        <a class="hidden" href="https://virtual-thom.github.io/archives/sitemap.xml" title="SiteMap">sitemap</a>
    </div>
</footer>

    </div>
  </body>

</html>