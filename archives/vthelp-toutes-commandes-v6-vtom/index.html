<!DOCTYPE html>
<html lang="fr">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="apple-touch-icon" href="https://virtual-thom.github.io/archives/apple-touch-icon.png">
  <link rel="icon" href="https://virtual-thom.github.io/archives/favicon.ico" />
  <!-- Remplacé par Jekyll SEO (sinon apparait en double)
  <title>Détails de toutes les commandes VTOM - VTHELP</title>
  <meta name="description" content="Je viens de prendre une claque. Ca fait 10 ans, peu ou prou, que j’ai fait la connaissance de mon Sergent-Chef préféré (et par la même occasion, mon instruct...">
  --> 
  
  <link rel="canonical" href="https://virtual-thom.github.io/archives/vthelp-toutes-commandes-v6-vtom/">
  
  <link rel="stylesheet" media="screen" href="https://virtual-thom.github.io/archives/assets/main.css">
  
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Détails de toutes les commandes VTOM - VTHELP | Virtual-Thom Blog-notes VTOM et informatique</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Détails de toutes les commandes VTOM - VTHELP" />
<meta name="author" content="Virtual Thom" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Je viens de prendre une claque. Ca fait 10 ans, peu ou prou, que j’ai fait la connaissance de mon Sergent-Chef préféré (et par la même occasion, mon instructeur - Dieu - VTOM et futur bon ami). A défaut de m’accueillir convenablement, pour sauver la France sans doute, je me souviens d’un charmant cadeau : une pile de dossiers à éplucher pour découvrir VTOM. Une des mes premières tâches consistait à effectuer une boucle sur toutes les commandes VTOM (en ligne de commande) afin de savoir comment elles fonctionnaient. Je n’y connaissais rien à l’époque (et surtout pas le scripting) et je me rappelle en avoir bavé ! Sorte de revanche face à l’adversité de cette (belle) époque, j’espère aider ce petit jeune qui, comme moi, commence et galère aujourd’hui. L’idée est de boucler sur la commande vthelp qui donne à l’écran toutes les commandes VTOM. Placez-vous sous votre user d’admin serveur vtom bac à sable (je précise ! car on ne sait jamais quand on commence, on pourrait lancer un vtserver sans le vouloir ou autre) et c’est parti :" />
<meta property="og:description" content="Je viens de prendre une claque. Ca fait 10 ans, peu ou prou, que j’ai fait la connaissance de mon Sergent-Chef préféré (et par la même occasion, mon instructeur - Dieu - VTOM et futur bon ami). A défaut de m’accueillir convenablement, pour sauver la France sans doute, je me souviens d’un charmant cadeau : une pile de dossiers à éplucher pour découvrir VTOM. Une des mes premières tâches consistait à effectuer une boucle sur toutes les commandes VTOM (en ligne de commande) afin de savoir comment elles fonctionnaient. Je n’y connaissais rien à l’époque (et surtout pas le scripting) et je me rappelle en avoir bavé ! Sorte de revanche face à l’adversité de cette (belle) époque, j’espère aider ce petit jeune qui, comme moi, commence et galère aujourd’hui. L’idée est de boucler sur la commande vthelp qui donne à l’écran toutes les commandes VTOM. Placez-vous sous votre user d’admin serveur vtom bac à sable (je précise ! car on ne sait jamais quand on commence, on pourrait lancer un vtserver sans le vouloir ou autre) et c’est parti :" />
<link rel="canonical" href="https://virtual-thom.github.io/archives/vthelp-toutes-commandes-v6-vtom/" />
<meta property="og:url" content="https://virtual-thom.github.io/archives/vthelp-toutes-commandes-v6-vtom/" />
<meta property="og:site_name" content="Virtual-Thom Blog-notes VTOM et informatique" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-07T12:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Détails de toutes les commandes VTOM - VTHELP" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Virtual Thom"},"dateModified":"2019-04-07T12:00:00+00:00","datePublished":"2019-04-07T12:00:00+00:00","description":"Je viens de prendre une claque. Ca fait 10 ans, peu ou prou, que j’ai fait la connaissance de mon Sergent-Chef préféré (et par la même occasion, mon instructeur - Dieu - VTOM et futur bon ami). A défaut de m’accueillir convenablement, pour sauver la France sans doute, je me souviens d’un charmant cadeau : une pile de dossiers à éplucher pour découvrir VTOM. Une des mes premières tâches consistait à effectuer une boucle sur toutes les commandes VTOM (en ligne de commande) afin de savoir comment elles fonctionnaient. Je n’y connaissais rien à l’époque (et surtout pas le scripting) et je me rappelle en avoir bavé ! Sorte de revanche face à l’adversité de cette (belle) époque, j’espère aider ce petit jeune qui, comme moi, commence et galère aujourd’hui. L’idée est de boucler sur la commande vthelp qui donne à l’écran toutes les commandes VTOM. Placez-vous sous votre user d’admin serveur vtom bac à sable (je précise ! car on ne sait jamais quand on commence, on pourrait lancer un vtserver sans le vouloir ou autre) et c’est parti :","headline":"Détails de toutes les commandes VTOM - VTHELP","mainEntityOfPage":{"@type":"WebPage","@id":"https://virtual-thom.github.io/archives/vthelp-toutes-commandes-v6-vtom/"},"url":"https://virtual-thom.github.io/archives/vthelp-toutes-commandes-v6-vtom/"}</script>
<!-- End Jekyll SEO tag -->

  
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z8Y7902GRV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z8Y7902GRV');
</script>


  <body>
    <div class="container">
      <header id="site-header">
  <h1>Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps</h1>
  <nav>
    <ul>
      <li>
        <a href="https://virtual-thom.github.io/archives" title="Home">
          <svg class="svg-icon" viewBox="0 0 20 20">
            <path d="M18.121,9.88l-7.832-7.836c-0.155-0.158-0.428-0.155-0.584,0L1.842,9.913c-0.262,0.263-0.073,0.705,0.292,0.705h2.069v7.042c0,0.227,0.187,0.414,0.414,0.414h3.725c0.228,0,0.414-0.188,0.414-0.414v-3.313h2.483v3.313c0,0.227,0.187,0.414,0.413,0.414h3.726c0.229,0,0.414-0.188,0.414-0.414v-7.042h2.068h0.004C18.331,10.617,18.389,10.146,18.121,9.88 M14.963,17.245h-2.896v-3.313c0-0.229-0.186-0.415-0.414-0.415H8.342c-0.228,0-0.414,0.187-0.414,0.415v3.313H5.032v-6.628h9.931V17.245z M3.133,9.79l6.864-6.868l6.867,6.868H3.133z"></path>
          </svg>
        </a>
      </li>
      <li>
        <a href="https://virtual-thom.github.io/archives/vos-commentaires-livre-d-or/" title="Commentaires - livre d'or">
          <svg class="svg-icon" viewBox="0 0 20 20">
            <path d="M17.657,2.982H2.342c-0.234,0-0.425,0.191-0.425,0.426v10.21c0,0.234,0.191,0.426,0.425,0.426h3.404v2.553c0,0.397,0.48,0.547,0.725,0.302l2.889-2.854h8.298c0.234,0,0.426-0.191,0.426-0.426V3.408C18.083,3.174,17.892,2.982,17.657,2.982M17.232,13.192H9.185c-0.113,0-0.219,0.045-0.3,0.124l-2.289,2.262v-1.96c0-0.233-0.191-0.426-0.425-0.426H2.767V3.833h14.465V13.192z M10,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.488-0.668,1.488-1.489C11.488,7.905,10.821,7.237,10,7.237 M10,9.364c-0.352,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C10.638,9.077,10.351,9.364,10,9.364 M14.254,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489s1.489-0.668,1.489-1.489C15.743,7.905,15.075,7.237,14.254,7.237 M14.254,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.352,0,0.639,0.287,0.639,0.638C14.893,9.077,14.605,9.364,14.254,9.364 M5.746,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.489-0.668,1.489-1.489C7.234,7.905,6.566,7.237,5.746,7.237 M5.746,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C6.384,9.077,6.096,9.364,5.746,9.364"></path>
          </svg>
        </a>
      </li>
      
      <li>
        <a href="https://virtual-thom.github.io/about" title="Curriculum Vitae Thom">
          <svg class="svg-icon" viewBox="0 0 20 20">
            <path d="M12.075,10.812c1.358-0.853,2.242-2.507,2.242-4.037c0-2.181-1.795-4.618-4.198-4.618S5.921,4.594,5.921,6.775c0,1.53,0.884,3.185,2.242,4.037c-3.222,0.865-5.6,3.807-5.6,7.298c0,0.23,0.189,0.42,0.42,0.42h14.273c0.23,0,0.42-0.189,0.42-0.42C17.676,14.619,15.297,11.677,12.075,10.812 M6.761,6.775c0-2.162,1.773-3.778,3.358-3.778s3.359,1.616,3.359,3.778c0,2.162-1.774,3.778-3.359,3.778S6.761,8.937,6.761,6.775 M3.415,17.69c0.218-3.51,3.142-6.297,6.704-6.297c3.562,0,6.486,2.787,6.705,6.297H3.415z"></path>
          </svg>
        </a>
      </li>
    </ul>
  </nav>
</header>

      <div itemscope itemtype ="http://schema.org/Article" class="post">
  
  <header class="post-header">
    <h1 itemprop="name about headline" class="post-title">Détails de toutes les commandes VTOM - VTHELP</h1>
    <p class="post-meta">
      <time itemprop="datePublished dateModified" datetime="2019-04-07T12:00:00+00:00">07-04-2019</time></p>
  </header>

  <article class="post-content" itemprop="articleBody">
    <h1 class="hidden">Détails de toutes les commandes VTOM - VTHELP</h1>
    <p>Je viens de prendre une claque. Ca fait 10 ans, peu ou prou, que j’ai fait la connaissance de mon Sergent-Chef préféré (et par la même occasion, mon instructeur - Dieu - VTOM et futur bon ami).</p>

<p>A défaut de m’accueillir convenablement, pour sauver la France sans doute, je me souviens d’un charmant cadeau : une pile de dossiers à éplucher pour découvrir VTOM.</p>

<p>Une des mes premières tâches consistait à effectuer une boucle sur toutes les commandes VTOM (en ligne de commande) afin de savoir comment elles fonctionnaient.</p>

<p>Je n’y connaissais rien à l’époque (et surtout pas le scripting) et je me rappelle en avoir bavé ! Sorte de revanche face à l’adversité de cette (belle) époque, j’espère aider ce petit jeune qui, comme moi, commence et galère aujourd’hui.</p>

<p>L’idée est de boucler sur la commande <code class="language-plaintext highlighter-rouge">vthelp</code> qui donne à l’écran toutes les commandes VTOM.</p>

<p>Placez-vous sous votre user d’admin serveur vtom bac à sable (je précise ! car on ne sait jamais quand on commence, on pourrait lancer un vtserver sans le vouloir ou autre) et c’est parti :
<!--more--></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># commande pour lister toutes les commandes - et même + (fichiers ini etc)</span>
vthelp
VTHELP : 6.2.3 FR LINUX_X64 2018/01/18 Visual Tom <span class="o">(</span>c<span class="o">)</span> Absyss
<span class="o">(</span>C<span class="o">)</span> Copyright 2018 ABSYSS.

vthelp - affiche l<span class="s1">'aide d'</span>une commande Visual TOM

Usage :
 vthelp &lt;commande&gt;

Exemple :
 vthelp vtaddapp

Liste des commandes :
abswhat          bdaemon          bdel             bdown            bstat            buser            eclear
epresent         estart           estop            fw2vtmib         tchkdate         tdateinfo        tempty
tengine          tfile            tgetdate         timezone         tlist            tmail            tmessage
tpop             tpush            tremote          treset           tresetApp        tresetJob        tsend
tsms             tsnmp            tval             vtaddaccount     vtaddapp         vtaddcal         vtadddate
vtaddjob         vtaddlegend      vtaddmach        vtaddperiod      vtaddprofile     vtaddqueue       vtaddres
vtaddtoken       vtaddunit        vtadduser        vtbackup         vtcmd            vtcopy           vtdcs
vtdelaccount     vtdelalarm       vtdelapp         vtdelcal         vtdeldate        vtdelenv         vtdelinstruction
vtdeljob         vtdellegend      vtdellink        vtdelmach        vtdelperiod      vtdelprofile     vtdelqueue
vtdelres         vtdeltoken       vtdelunit        vtdeluser        vtexport         vtgestlog        vthelp
vthtools         vthttpd          vtimport         vtlclient        vtlist           vtmachine        vtmanager
vtmigrate        vtmonitor        vtmsg            vtom.ini         vtomkill         vtping           vtplan
vtserver         vtsgbd           vtstart          vtstep           vtstools         vttdf            VTXVision.ini

<span class="c"># unitairement pour connaître le détail d'aide pour une commande : vthelp &lt;une commande vtom&gt;</span>
vthelp vtlist
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># une boucle for avec la sortie à l'écran du vthelp </span>
<span class="c"># for &lt;une variable n'importe - admettons : luke&gt; in des mots separes par un espace; do # ici on écrit toutes les instructions qu'on souhaite séparées par un point virgule ou un saut de ligne - et on pourra reprendre la variable for luke du début en rajoutant un $ dollar. ex echo $luke ; done</span>
<span class="c"># $luke prendra alors, tour à tour, la valeur : des, mots, separes, par, un, espace</span>
<span class="c"># $(instructions) permet d'exécuter les instructions et d'en avoir la sortie à l'écran - plus ou moins idem que `instructions`</span>
<span class="c"># le pipe | permet de prendre la "sortie de gauche" pour la "mettre en entrée" de la commande à droite</span>
<span class="c"># le grep -A200 permet de prendre 200 lignes After/Après la chaîne de caractères "Liste des commandes" - c'est arbitraire</span>
<span class="c"># notez que mon vthelp est en français mais il faudra remplacer cette chaîne de caractère si vous êtez dans une autre langue ou que la sortie du vthelp change</span>
<span class="c"># l'idée est juste de récupérer les commandes et seulement les commandes de la sortie à l'écran du vthelp</span>
<span class="c"># le grep -v enlève cette première ligne qui ne nous sert pas</span>
<span class="k">for </span>cmd <span class="k">in</span> <span class="si">$(</span>vthelp | <span class="nb">grep</span> <span class="nt">-A200</span> <span class="s2">"Liste des commandes"</span> | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s2">"Liste des commandes"</span><span class="si">)</span><span class="p">;</span> <span class="k">do
</span>vthelp <span class="nv">$cmd</span>
<span class="k">done</span>

<span class="c"># Je me souviens que j'avais tout imprimé à l'époque ! pour cela, j'avais tout mis dans des fichiers txt, rapatriés ces derniers, et imprimés</span>
<span class="c"># commande &gt; monfichier va créer ou remplacer monfichier avec le contenu de la sortie d'écran de commande</span>
<span class="nb">mkdir </span>mon_dossier <span class="p">;</span> <span class="nb">cd </span>mon_dossier
<span class="k">for </span>cmd <span class="k">in</span> <span class="si">$(</span>vthelp | <span class="nb">grep</span> <span class="nt">-A200</span> <span class="s2">"Liste des commandes"</span> | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s2">"Liste des commandes"</span><span class="si">)</span><span class="p">;</span> <span class="k">do
</span>vthelp <span class="nv">$cmd</span> <span class="o">&gt;</span> <span class="k">${</span><span class="nv">cmd</span><span class="k">}</span>.txt
<span class="k">done</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># c'est loin d'être la seule méthode !!! amusez-vous avec les boucles while, for, awk</span>
<span class="c"># regardez sur le net ces commandes pratiques pour parser, triturer, modifier des chaînes de caractères : sed, grep, egrep, tr, cut, awk</span>
<span class="c"># quelques petits exemples</span>
<span class="c"># vous pouvez aussi vous orientez vers une boucle while read &lt;un nom de variable, peu importe&gt; mais dans ce cas, il faudra "parser votre" ligne car une ligne contient plusieurs commandes (ou mettre à plat les commandes ligne à ligne)</span>
<span class="c"># exemple sur une colonne ligne à ligne</span>
vthelp | <span class="nb">grep</span> <span class="nt">-A200</span> <span class="s2">"Liste des commandes"</span> | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s2">"Liste des commandes"</span> | <span class="nb">tr</span> <span class="o">[</span>:space:] <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span> | egrep <span class="nt">-v</span> <span class="s2">"^$"</span>
<span class="c"># puis while</span>
vthelp | <span class="nb">grep</span> <span class="nt">-A200</span> <span class="s2">"Liste des commandes"</span> | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s2">"Liste des commandes"</span> | <span class="nb">tr</span> <span class="o">[</span>:space:] <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span> | egrep <span class="nt">-v</span> <span class="s2">"^$"</span> | <span class="k">while </span><span class="nb">read </span>cmd <span class="p">;</span><span class="k">do
</span>vthelp <span class="nv">$cmd</span>
<span class="k">done</span>

<span class="c"># avec awk</span>
<span class="c"># sur une colonne ligne à ligne</span>
vthelp | <span class="nb">awk</span> <span class="s1">'
BEGIN{i=0}
{
  if(i){
    for(j = 1; j &lt;= NF; j++) { print $j; }
  };
  if(match($0,/Liste des commandes/)){i=1};
}'</span>
<span class="c"># avec l'exécution du vthelp cmd</span>
vthelp | <span class="nb">awk</span> <span class="s1">'
BEGIN{i=0}
{
  if(i){
    for(j = 1; j &lt;= NF; j++) { system("vthelp "$j); }
  };
  if(match($0,/Liste des commandes/)){i=1};
}'</span>
</code></pre></div></div>

  </article>
  
<nav>
  <ul class="pager">
    
     
    <li class="previous">
      <a href="https://virtual-thom.github.io/archives/repertoire-courant-client-vtom-bdaemon/"><span aria-hidden="true">&larr;</span> Répertoire courant VTOM Bdaemon</a> 
    </li>
    
     
     <li class="next">
      <a class="next" href="https://virtual-thom.github.io/archives/erreur-queue-batch/">Erreur nouvelle queue windows <span aria-hidden="true">&rarr;</span></a> 
    </li>
     
    
  </ul>
</nav>


  <footer class="post-footer">
    
      
        <a itemprop="articleSection" class="btn btn-default btn-xs btn-categories" href="https://virtual-thom.github.io/archives"><span class="glyphicon glyphicon-asterisk"></span>vtom</a>
      
        <a itemprop="articleSection" class="btn btn-default btn-xs btn-categories" href="https://virtual-thom.github.io/archives"><span class="glyphicon glyphicon-asterisk"></span>v6</a>
      
        <a itemprop="articleSection" class="btn btn-default btn-xs btn-categories" href="https://virtual-thom.github.io/archives"><span class="glyphicon glyphicon-asterisk"></span>vthelp</a>
      
        <a itemprop="articleSection" class="btn btn-default btn-xs btn-categories" href="https://virtual-thom.github.io/archives"><span class="glyphicon glyphicon-asterisk"></span>ligne de commande</a>
      
    
    <span  itemprop="author publisher" class="hidden">Virtual Thom</span>
  </footer>
  
  <div id="disqus_thread" ></div>
  <script>
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'thomas-asnar'; // required: replace example with your forum shortname
  
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
</div>

      <footer id="site-footer">
    <div>&copy;<a href="https://github.com/virtual-thom/" title="Github Virtual-Thom">Virtual-Thom</a></div>
    <div>
            <a href="https://virtual-thom.github.io/archives/plan" title="Plan du site">sitemap</a> | <a href="https://virtual-thom.github.io/about" rel="publisher author" title="Curriculum vitae Thom">A propos</a>
    </div>
    <div>
        <a id="goto-site-header" href="#site-header" title="Retourner au début">&uArr; Top</a>
    </div>
    <div id="footer-disclaimer">
        <p>Avertissement : vous ne devez pas prendre pour argent comptant le contenu de ce site. Testez toujours la solution en environnement de test.</p>
        <p>Malgré le sérieux que je m'efforce de mettre dans le contenu de ces billets, je ne pourrai être tenu responsable d'éventuelles erreurs que cela pourrait engendrer.</p>
    </div>
    <div>
        <a class="hidden" href="https://virtual-thom.github.io/archives/sitemap.xml" title="SiteMap">sitemap</a>
    </div>
</footer>

    </div>
  </body>

</html>