<!DOCTYPE html>
<html lang="fr">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="apple-touch-icon" href="https://virtual-thom.github.io/archives/apple-touch-icon.png">
  <link rel="icon" href="https://virtual-thom.github.io/archives/favicon.ico" />
  <!-- Remplacé par Jekyll SEO (sinon apparait en double)
  <title>Virtual-Thom | Blog-notes VTOM et informatique</title>
  <meta name="description" content="Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps">
  --> 
  
  <link rel="canonical" href="https://virtual-thom.github.io/archives/page5/">
  
  <link rel="stylesheet" media="screen" href="https://virtual-thom.github.io/archives/assets/main.css">
  
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Page 5 of 14 for Virtual-Thom Blog-notes VTOM et informatique | Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Virtual-Thom Blog-notes VTOM et informatique" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps" />
<meta property="og:description" content="Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps" />
<link rel="canonical" href="https://virtual-thom.github.io/archives/page5/" />
<meta property="og:url" content="https://virtual-thom.github.io/archives/page5/" />
<meta property="og:site_name" content="Virtual-Thom Blog-notes VTOM et informatique" />
<meta property="og:type" content="website" />
<link rel="prev" href="https://virtual-thom.github.io/archives/page4" />
<link rel="next" href="https://virtual-thom.github.io/archives/page6" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Virtual-Thom Blog-notes VTOM et informatique" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps","headline":"Virtual-Thom Blog-notes VTOM et informatique","url":"https://virtual-thom.github.io/archives/page5/"}</script>
<!-- End Jekyll SEO tag -->

  
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z8Y7902GRV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z8Y7902GRV');
</script>


  <body>
    <div class="container">
      <header id="site-header">
  <h1>Blog-notes VTOM, informatique, industrialisation, ordonnancement, DevOps</h1>
  <nav>
    <ul>
      <li>
        <a href="https://virtual-thom.github.io/archives" title="Home">
          <svg class="svg-icon" viewbox="0 0 20 20">
            <path d="M18.121,9.88l-7.832-7.836c-0.155-0.158-0.428-0.155-0.584,0L1.842,9.913c-0.262,0.263-0.073,0.705,0.292,0.705h2.069v7.042c0,0.227,0.187,0.414,0.414,0.414h3.725c0.228,0,0.414-0.188,0.414-0.414v-3.313h2.483v3.313c0,0.227,0.187,0.414,0.413,0.414h3.726c0.229,0,0.414-0.188,0.414-0.414v-7.042h2.068h0.004C18.331,10.617,18.389,10.146,18.121,9.88 M14.963,17.245h-2.896v-3.313c0-0.229-0.186-0.415-0.414-0.415H8.342c-0.228,0-0.414,0.187-0.414,0.415v3.313H5.032v-6.628h9.931V17.245z M3.133,9.79l6.864-6.868l6.867,6.868H3.133z"></path>
          </svg>
        </a>
      </li>
      <li>
        <a href="https://virtual-thom.github.io/archives/vos-commentaires-livre-d-or/" title="Commentaires - livre d'or">
          <svg class="svg-icon" viewbox="0 0 20 20">
            <path d="M17.657,2.982H2.342c-0.234,0-0.425,0.191-0.425,0.426v10.21c0,0.234,0.191,0.426,0.425,0.426h3.404v2.553c0,0.397,0.48,0.547,0.725,0.302l2.889-2.854h8.298c0.234,0,0.426-0.191,0.426-0.426V3.408C18.083,3.174,17.892,2.982,17.657,2.982M17.232,13.192H9.185c-0.113,0-0.219,0.045-0.3,0.124l-2.289,2.262v-1.96c0-0.233-0.191-0.426-0.425-0.426H2.767V3.833h14.465V13.192z M10,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.488-0.668,1.488-1.489C11.488,7.905,10.821,7.237,10,7.237 M10,9.364c-0.352,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C10.638,9.077,10.351,9.364,10,9.364 M14.254,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489s1.489-0.668,1.489-1.489C15.743,7.905,15.075,7.237,14.254,7.237 M14.254,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.352,0,0.639,0.287,0.639,0.638C14.893,9.077,14.605,9.364,14.254,9.364 M5.746,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.489-0.668,1.489-1.489C7.234,7.905,6.566,7.237,5.746,7.237 M5.746,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C6.384,9.077,6.096,9.364,5.746,9.364"></path>
          </svg>
        </a>
      </li>
      
      <li>
        <a href="https://virtual-thom.github.io/about" title="Curriculum Vitae Thom">
          <svg class="svg-icon" viewbox="0 0 20 20">
            <path d="M12.075,10.812c1.358-0.853,2.242-2.507,2.242-4.037c0-2.181-1.795-4.618-4.198-4.618S5.921,4.594,5.921,6.775c0,1.53,0.884,3.185,2.242,4.037c-3.222,0.865-5.6,3.807-5.6,7.298c0,0.23,0.189,0.42,0.42,0.42h14.273c0.23,0,0.42-0.189,0.42-0.42C17.676,14.619,15.297,11.677,12.075,10.812 M6.761,6.775c0-2.162,1.773-3.778,3.358-3.778s3.359,1.616,3.359,3.778c0,2.162-1.774,3.778-3.359,3.778S6.761,8.937,6.761,6.775 M3.415,17.69c0.218-3.51,3.142-6.297,6.704-6.297c3.562,0,6.486,2.787,6.705,6.297H3.415z"></path>
          </svg>
        </a>
      </li>
    </ul>
  </nav>
</header>

      <nav>
  <ul class="pagination">
    
    <li>
      <a href="/page4" class="Précédant">
        <span aria-hidden="true">«</span>
      </a>
    </li>
      
    <li>
      <a href="/archives/index.html">1</a>
    </li>
      
    <li>
      <a href="/archives/page2">2</a>
    </li>
      
    <li>
      <a href="/archives/page3">3</a>
    </li>
      
    <li>
      <a href="/archives/page4">4</a>
    </li>
      
    <li class="active">
      <span>5</span>
    </li>
      
    <li>
      <a href="/archives/page6">6</a>
    </li>
      
    <li>
      <a href="/archives/page7">7</a>
    </li>
      
    <li>
      <a href="/archives/page8">8</a>
    </li>
      
    <li>
      <a href="/archives/page9">9</a>
    </li>
      
    <li>
      <a href="/archives/page10">10</a>
    </li>
      
    <li>
      <a href="/archives/page11">11</a>
    </li>
      
    <li>
      <a href="/archives/page12">12</a>
    </li>
      
    <li>
      <a href="/archives/page13">13</a>
    </li>
      
    <li>
      <a href="/archives/page14">14</a>
    </li>
      
    <li>
      <a href="/page6" aria-label="Suivant">
        <span aria-hidden="true">»</span>
      </a>
    </li>
    
  </ul>
</nav>
<ul class="post-list post-list-with-type">
  
  <li>
    <a class="post-link" href="/archives/erreur-queue-batch/">Erreur nouvelle queue windows</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/vthelp-toutes-commandes-v6-vtom/">Détails de toutes les commandes VTOM - VTHELP</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/repertoire-courant-client-vtom-bdaemon/">Répertoire courant VTOM Bdaemon</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/wordpress-api-rest-json-tablepress/">Wordpress API Tablepress retour JSON table</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/job-modele-vtom-db-oracle/">Modèle de job SGBD (VT-XAP-SGBD) vtom (ex oracle)</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/datatables-serverside-processing-oracle/">DataTables ServerSide Processing pour Oracle</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/modele-job-vtom-api-rest-webservice/">Webservice / Modele Job VTOM REST</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/api-vtom-web-access-v6/">API VTOM webaccess (update)</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/parcel-bundler-dev-web/">Parcel bundler - Dev Web</a>
  </li>
  
  <li>
    <a class="post-link" href="/archives/purge-log-vtom-fin-job/">Purge log VTOM en fin de traitement</a>
  </li>
  
</ul>


<div id="page-first-post">

  <div itemscope itemtype="http://schema.org/Article" class="post">

    <article class="post-content" itemprop="articleBody">
      <h1 itemprop="name about headline" class="post-title">Erreur nouvelle queue windows</h1>
      <p>Note à moi-même, nouvelle queue sur un client windows, vérifier l’encodage.</p>

<p>J’ai ce genre d’erreur avec l’encode UTF-8 with BOM (réglé en changeant en UTF-8 tout court)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\WINDOWS\system32&gt;﻿@echo OFF 

C:\WINDOWS\system32&gt;echo ______________________________________________________________________ 
______________________________________________________________________

C:\WINDOWS\system32&gt;echo Contexte Visual TOM du traitement 
Contexte Visual TOM du traitement

C:\WINDOWS\system32&gt;echo.
</code></pre></div></div>

<p>avec l’erreur :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'﻿@echo' is not recognized as an internal or external command, operable program or batch file.
</code></pre></div></div>


      (voir plus)
      <a class="post-link" href="/archives/erreur-queue-batch/">Erreur nouvelle queue windows</a>
      <p class="post-meta">
        <time class="post-meta" itemprop="datePublished dateModified" datetime="2019-07-16T18:00:00+00:00">16-07-2019</time>
      </p>
    </article>
  </div>
</div>




















<ul class="post-list">
  
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/vthelp-toutes-commandes-v6-vtom/">Détails de toutes les commandes VTOM - VTHELP</a></h4>
      <p></p>
<p>Je viens de prendre une claque. Ca fait 10 ans, peu ou prou, que j’ai fait la connaissance de mon Sergent-Chef préféré (et par la même occasion, mon instructeur - Dieu - VTOM et futur bon ami).</p>

<p>A défaut de m’accueillir convenablement, pour sauver la France sans doute, je me souviens d’un charmant cadeau : une pile de dossiers à éplucher pour découvrir VTOM.</p>

<p>Une des mes premières tâches consistait à effectuer une boucle sur toutes les commandes VTOM (en ligne de commande) afin de savoir comment elles fonctionnaient.</p>

<p>Je n’y connaissais rien à l’époque (et surtout pas le scripting) et je me rappelle en avoir bavé ! Sorte de revanche face à l’adversité de cette (belle) époque, j’espère aider ce petit jeune qui, comme moi, commence et galère aujourd’hui.</p>

<p>L’idée est de boucler sur la commande <code class="language-plaintext highlighter-rouge">vthelp</code> qui donne à l’écran toutes les commandes VTOM.</p>

<p>Placez-vous sous votre user d’admin serveur vtom bac à sable (je précise ! car on ne sait jamais quand on commence, on pourrait lancer un vtserver sans le vouloir ou autre) et c’est parti :</p>

      
          <a href="/archives/vthelp-toutes-commandes-v6-vtom/">Article complet ici</a>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/repertoire-courant-client-vtom-bdaemon/">Répertoire courant VTOM Bdaemon</a></h4>
      <p></p>
<p>Note à moi-même, le répertoire courant d’où sont lancés les scripts sur un client VTOM est celui d’où on lance le bdaemon (ou n’importe quel script le lançant ex start_bdaemon, /etc/init.d/vtom_bdaemon, $ABM_BIN/bdaemon etc)</p>

<p>Et ce, quelque soit le user de soumission.</p>

<p>On peut avoir ce genre d’erreur par exemple quand on lance le client VTOM bdaemon depuis une home dir en 700 /home/vtom (ex) :
<code class="language-plaintext highlighter-rouge">find: failed to restore initial working directory: Permission denied</code></p>

<p>En fait, le <code class="language-plaintext highlighter-rouge">find</code> essaie de revenir au répertoire d’où il s’est lancé (et sur un 700 n’y arrive pas selon le user de soumission)</p>

<p>note à moi-même, éviter de lancer le client bdaemon depuis / :X ça peut être grave du coup</p>

      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/wordpress-api-rest-json-tablepress/">Wordpress API Tablepress retour JSON table</a></h4>
      <p></p>
<p>But du jeu, récupérer la data d’un tableau créé avec TablePress (retour JSON et appel ajax)</p>

<p>!! Attention !! Vous devez savoir ce que vous faites quand on modifie un plugin et les hooks, on peut potentiellement ne plus avoir accès à son site wp.</p>


      
          <a href="/archives/wordpress-api-rest-json-tablepress/">Article complet ici</a>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/job-modele-vtom-db-oracle/">Modèle de job SGBD (VT-XAP-SGBD) vtom (ex oracle)</a></h4>
      <p></p>
<ol>
  <li>Copier les drivers JDBC sur le client et dans votre répertoire IHM</li>
  <li>Créer une connexion à la base SGBD dans VTOM (partie Modèle)</li>
  <li>Glisser / Déposer le modèle de Job SGBD dans une APPLICATION VTOM (je précise APPPLICATION <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">)</li>
  <li>Configurer le job (requête SQL ou fichier SQL, actions à effectuer etc)</li>
</ol>

<h3 id="configuration-client-v6-ok-avec-queue_vt2db-obligatoire">configuration client (v6 ok avec queue_vt2db obligatoire)</h3>

<p>copier les drivers JDBC dans $ABM_BIN/jdbc/drivers/</p>

<p>exemple /usr/vtom/abm/bin/jdbc/drivers/ojdbc6.jar</p>

<h3 id="configuration-ihm">configuration IHM</h3>

<p>copier les drivers JDBC dans votre répertoire IHM (où se trouve le VtomXvision.exe) .\plugins\jdbc\drivers</p>

<h3 id="configuration-de-la-chaîne-de-connexion-exemple-oracle">configuration de la chaîne de connexion (Exemple Oracle)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Driver JDBC         : oracle.jdbc.driver.OracleDriver
Chaine de connexion : jdbc:oracle:thin:@server:port:sid
Utilisateur         : user
</code></pre></div></div>

<h3 id="exemple-de-log">exemple de log</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>00:00:05 | INFO  | Vtom2Db : 6.2.3 FR LINUX_X64 2018/01/18 Visual Tom (c) Absyss
00:00:05 | INFO  | Load JDBC Drivers
00:00:05 | INFO  | Search for JAR in :./jdbc/drivers
00:00:05 | INFO  | /usr/vtom/abm/bin/./jdbc/drivers
00:00:05 | INFO  | Add Driver to classloader : /usr/vtom/abm/bin/./jdbc/drivers/ojdbc6.jar
00:00:05 | INFO  | Retrieve connection properties from environment
00:00:05 | INFO  | Execute task
00:00:08 | INFO  | Execute Sql: select * from OSEF
00:00:08 | INFO  | Use result: 1
00:00:08 | INFO  | Begin actions with conditions 1/1
00:00:08 | INFO  | Check conditions
00:00:08 | INFO  | Check Task returns a result
00:00:08 | INFO  | Condition is ok
00:00:08 | INFO  | Execute action: Show result
00:00:08 | INFO  | Result:
00:00:08 | INFO  | ENV1|APP1|OSEF|OSEF
....
</code></pre></div></div>

      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/datatables-serverside-processing-oracle/">DataTables ServerSide Processing pour Oracle</a></h4>
      <p></p>
<h2 id="oraclesspclassphp">oracle.ssp.class.php</h2>

<p><a href="https://github.com/virtual-thom/DataTables/blob/master/oracle.ssp.class.php">https://github.com/virtual-thom/DataTables/blob/master/oracle.ssp.class.php</a></p>

<p>Petite adaptation pour ma base oracle afin d’effectuer du serverSide Processing avec DataTables : PDO driver oci, requête pour simuler le LIMIT, ajout d’un NLS_DATE_FORMAT.</p>

<p>Originale pour MySQL :</p>

<p><a href="https://github.com/DataTables/DataTables/blob/master/examples/server_side/scripts/ssp.class.php">https://github.com/DataTables/DataTables/blob/master/examples/server_side/scripts/ssp.class.php</a></p>

<p><a href="https://datatables.net/examples/data_sources/server_side">https://datatables.net/examples/data_sources/server_side</a></p>

      
          <a href="/archives/datatables-serverside-processing-oracle/">Article complet ici</a>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/modele-job-vtom-api-rest-webservice/">Webservice / Modele Job VTOM REST</a></h4>
      <p></p>
<blockquote>
  <p>All service interfaces, without exception, must be designed from the ground up to be externalizable. That is to say, the team must plan and design to be able to expose the interface to developers in the outside world. No exceptions.
Anyone who doesn’t do this will be fired.
Thank you; have a nice day!</p>
</blockquote>

<p>Dixit <a href="https://virtual-thom.github.io/archives/wp-content/uploads/modularization.pdf">Jeff Bezos (Amazon’s CEO) Mandate 2012</a>.</p>

<p>2012 … C’est pourtant devenu la norme. Et la paraphrase “Si vous développez une application sans API, vous êtes viré !” est toujours d’actualité. Les API sont partout.</p>

<p>Vous connaissez sans doute XLDeploy / XLRelease et Jenkins ?! Dans le monde DevOps, ces outils semblent incontournables, notamment pour le déploiement et/ou intégration continu, la gestion d’un workflow, etc…
Et, devinez quoi ? ils fonctionnent et proposent des API REST.</p>

<p>What about notre ordonnanceur préféré VTOM dans tout ça ? Après tout, il pourrait très bien déclencher et gérer ces workflows. Il suffirait de scripter (nodejs, powershell ou autre) les appels API.</p>

<p>Oui, mais pas que ! Sâchez qu’il existe des modèles de traitement “Web Service REST” qui peut nous simplifier la vie et avoir quelque chose de bien plus exploitable et visuel.</p>

<p>Je vais faire deux exemples GET et je m’arrêterai là pour cette introduction. Mais ça donnera les bases pour faire du GET, PUT, POST, DELETE.</p>
<ul>
  <li>Une récurépation de fichier XML si, dans la réponse, j’ai une certaine valeur, d’un noeud en particulier, qui me sied (grâce à une expression XPath)</li>
  <li>Une récupération de fichier JSON si dans la réponse j’ai un attribut JSON “status” à OK (grâce au JSONPath)</li>
</ul>

      
          <a href="/archives/modele-job-vtom-api-rest-webservice/">Article complet ici</a>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/api-vtom-web-access-v6/">API VTOM webaccess (update)</a></h4>
      <p></p>
<h2 id="avertissement">Avertissement</h2>
<ul>
  <li>Les APIs ne sont pas soutenues pas Absyss pour le moment (ni documentées). Vous pouvez les utiliser mais on ne vous fournira aucune aide, assistance, ou débuggage d’après moi. (maj 11/05/20 à priori, les API seront supportées dès la v6.4.5)</li>
  <li>Il n’y a aucune garantie que ce qui fonctionne aujourd’hui fonctionnera de la même manière avec la prochaine version.</li>
  <li>Il est donc actuellement déconseillé de les exploiter en environnement productif.</li>
</ul>

<p>Petite update du <a href="/api-vtom-web-access">1 er post API VTOM via le WebAccess ici</a>.</p>

<h2 id="rappels-importants-sur-le-portail-web-et-les-api">Rappels importants sur le portail web et les API</h2>

<ul>
  <li>Côté serveur : Démarrez le service <code class="language-plaintext highlighter-rouge">vthttpd</code> et tapez <code class="language-plaintext highlighter-rouge">vtping</code> pour voir son état et son port. (le port est défini dans <code class="language-plaintext highlighter-rouge">/etc/services</code>). Le démarrage automatique peut être décommenté du script <code class="language-plaintext highlighter-rouge">$TOM_ADMIN/start_servers</code>
</li>
  <li>Côté client : Interface web type client léger afin d’explorer, piloter, et suivre l’exploitation d’un serveur VTOM. Rendez-vous sur l’url http://&lt;nomdevotreserveur ou sonIP&gt;:&lt;port&gt; et authentifiez-vous.</li>
  <li>Ouvrez votre navigateur Chrome F12 et allez dans l’onglet Network pour voir les appels aux API. Baladez dans les menus du portail web et glannez les différentes adresses et requêtes XHR.</li>
  <li>Requêter :
    <ul>
      <li>Rajouter dans le header des requêtes le user:mdp en base64 (voir mon premier post pour les détails) : ex. pour une XMLHttpRequest <code class="language-plaintext highlighter-rouge">xhr.setRequestHeader('Authorization', 'Basic VE9NOlRPTQ==')</code>
</li>
      <li>En local depuis le même serveur VTOM, les appels directs XMLHttpRequest Chrome passent sans soucis. En revanche, je n’ai pas réussi à faire fonctionner depuis un autre domaine (à cause du Cross-origin resource sharing - <a href="https://developer.mozilla.org/fr/docs/Web/HTTP/CORS">CORS</a>)</li>
      <li>sinon les appels en back-end fonctionnent très bien de n’importe où : <code class="language-plaintext highlighter-rouge">curl</code>, <code class="language-plaintext highlighter-rouge">node js</code>, <code class="language-plaintext highlighter-rouge">php</code> etc.</li>
    </ul>
  </li>
</ul>

      
          <a href="/archives/api-vtom-web-access-v6/">Article complet ici</a>
      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/parcel-bundler-dev-web/">Parcel bundler - Dev Web</a></h4>
      <p></p>
<p>Après quelques projets web montés avec webpack, je suis tombé sur <code class="language-plaintext highlighter-rouge">parcel-bundler</code> grace à Grafikart.</p>

<p>C’est tellement plus simple ! Webpack est beaucoup trop compliqué à configurer. On passe plus de temps à peaufiner la conf qu’à écrire l’application.</p>

<p>En gros <code class="language-plaintext highlighter-rouge">parcel-bundler</code> et vous êtes good to go pour dev en ECMAScript 6  et autres fioritures intéressantes dont on rafole en tant que dev web (build une distribution de prod minifié, un seul fichier css, js, etc.)</p>

<p>Si besoin de convertir en ES5 pour plus de compatibilité navigateur,il suffira d’installer le module babel. Voir les liens utiles. Grafikart montre ça très bien <code class="language-plaintext highlighter-rouge">npm install -D babel-preset-env</code> et rajout du fichier <code class="language-plaintext highlighter-rouge">.babelrc</code>.</p>

<p>Si vous installez parcel localement <code class="language-plaintext highlighter-rouge">npm install -D parcel-bundler</code>, et que vous voulez l’exécuter en ligne de commande, le binaire <code class="language-plaintext highlighter-rouge">parcel</code> est sous <code class="language-plaintext highlighter-rouge">node_modules/.bin/parcel</code></p>

<p>(dans la clé “scripts” du package.json pas besoin de mettre le full path, npm “sait” qu’il faut aller chercher dans ./node_modules/.bin/)</p>

<h1 id="petit-exemple">Petit exemple</h1>

<p><code class="language-plaintext highlighter-rouge">package.json</code></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "name": "top100exportoracle",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "build": "parcel build --public-url ./ index.html",
    "dev": "parcel index.html",
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "babel-cli": "^6.26.0",
    "babel-preset-env": "^1.6.1",
    "bootstrap": "^4.0.0",
    "node-sass": "^4.7.2",
    "parcel-bundler": "^1.6.2"
  }
}
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">index.html</code></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
&lt;link rel="stylesheet" href="./src/styles/index.scss"&gt;
...
&lt;img src="./src/images/logo.png"&gt;
...
&lt;script src="./src/js/index.js"&gt;&lt;/script&gt;
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">src/index.js</code> (on se fiche du code, c’est juste pour montrer qu’on peut utiliser du code en ES6, importer des modules, des js, css, utiliser les classes,  etc.)</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Stats</span><span class="p">{</span>
    <span class="nf">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">rows</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Array</span><span class="p">()</span>
        
        <span class="k">this</span><span class="p">.</span><span class="nx">orderby</span> <span class="o">=</span> <span class="dl">""</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">vue</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">lastexec</span><span class="dl">"</span>
        
        <span class="k">this</span><span class="p">.</span><span class="nx">filters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">vtenvname</span><span class="dl">'</span><span class="p">:</span> <span class="p">[],</span>
            <span class="dl">'</span><span class="s1">appsjobsstopdem</span><span class="dl">'</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">vtbegin-to</span><span class="dl">'</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">vtbegin-from</span><span class="dl">'</span><span class="p">:</span> <span class="dl">""</span>
        <span class="p">}</span>
        <span class="p">...</span>
        <span class="p">...</span>
<span class="p">}</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">getURLAPI</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./confidentials</span><span class="dl">'</span>
<span class="kd">var</span> <span class="nx">urlAPI</span> <span class="o">=</span> <span class="nf">getURLAPI</span><span class="p">()</span>

<span class="kd">let</span> <span class="nx">allStats</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Stats</span><span class="p">()</span>
<span class="nx">allStats</span><span class="p">.</span><span class="nf">setTrHead</span><span class="p">()</span>
<span class="c1">// mise à jour du table header</span>
<span class="kd">let</span> <span class="nx">trTh</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">tr</span><span class="dl">"</span><span class="p">)</span>
<span class="nx">allStats</span><span class="p">.</span><span class="nx">trHead</span><span class="p">.</span><span class="nf">forEach</span><span class="p">((</span><span class="nx">th</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">trTh</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">&lt;th data-col='</span><span class="dl">"</span><span class="o">+</span><span class="nx">allStats</span><span class="p">.</span><span class="nx">trHeadLastExecDataset</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">+</span><span class="dl">"</span><span class="s2">'&gt;</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">th</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;/th&gt;</span><span class="dl">"</span>
<span class="p">})</span>
<span class="p">...</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">index.scss</code></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@import "custom_bootstrap"; 
#maincontainer {
    min-height: 800px;
    border-radius: 0 0 10px 10px;
    color: $purple;
}

#switchform,thead th {
    cursor: pointer;
}
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">custom_bootstrap.scss</code></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// on peut surdéfinir bootstrap ici
// violet chez nous
$purple: #691F75 !default;

@import "./../../node_modules/bootstrap/scss/bootstrap";
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    mon package.json ou à la main
    "build": "./node_modules/.bin/parcel build --public-url ./ index.html",
    "dev": "./node_modules/.bin/parcel index.html",
    
npm run build
npm run dev
</code></pre></div></div>

<p>THAT SIMPLE !</p>

<h1 id="liens-utiles">Liens utiles</h1>

<p><a href="https://parceljs.org">site officiel Parcel avec la documentation</a></p>

<p><a href="https://www.grafikart.fr/tutoriels/javascript/parcel-bundler-985">Excellente vidéo de Grafikart sur Parcel</a></p>

<p><a href="https://www.grafikart.fr/formations/debuter-javascript/ecmascript-2015">Encore une vidéo de Grafikart afin d’appréhender les nouveautés ES6</a></p>

<p><a href="https://caniuse.com/">Compatibilité et support des features par navigateur</a></p>

      
    </div>

  </li>
  
  
  
  <li>
    <div class="card">
      <h4><a class="post-link" href="/archives/purge-log-vtom-fin-job/">Purge log VTOM en fin de traitement</a></h4>
      <p></p>
<p>En voilà une bonne nouvelle qui m’avait échappé (depuis la 5.8 à priori). Une fin de traitement qui permet de purger automatiquement les logs VTOM avec les nouvelles queues. Merci à Vincent pour son oeil aguerri <img class="emoji" title=":stuck_out_tongue_winking_eye:" alt=":stuck_out_tongue_winking_eye:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f61c.png" height="20" width="20"></p>

<p><img src="https://virtual-thom.github.io/archives/wp-content/uploads/purge_vtom_fin_job.jpg" alt="Purge automatique log VTOM fin de traitement"></p>

      
    </div>

  </li>
  
  
</ul>
<!-- Pagination links -->
<nav>
  <ul class="pagination">
    
    <li>
      <a href="/page4" class="Précédant">
        <span aria-hidden="true">«</span>
      </a>
    </li>
      
    <li>
      <a href="/archives/index.html">1</a>
    </li>
      
    <li>
      <a href="/archives/page2">2</a>
    </li>
      
    <li>
      <a href="/archives/page3">3</a>
    </li>
      
    <li>
      <a href="/archives/page4">4</a>
    </li>
      
    <li class="active">
      <span>5</span>
    </li>
      
    <li>
      <a href="/archives/page6">6</a>
    </li>
      
    <li>
      <a href="/archives/page7">7</a>
    </li>
      
    <li>
      <a href="/archives/page8">8</a>
    </li>
      
    <li>
      <a href="/archives/page9">9</a>
    </li>
      
    <li>
      <a href="/archives/page10">10</a>
    </li>
      
    <li>
      <a href="/archives/page11">11</a>
    </li>
      
    <li>
      <a href="/archives/page12">12</a>
    </li>
      
    <li>
      <a href="/archives/page13">13</a>
    </li>
      
    <li>
      <a href="/archives/page14">14</a>
    </li>
      
    <li>
      <a href="/page6" aria-label="Suivant">
        <span aria-hidden="true">»</span>
      </a>
    </li>
    
  </ul>
</nav>

      <footer id="site-footer">
    <div>©<a href="https://github.com/virtual-thom/" title="Github Virtual-Thom">Virtual-Thom</a>
</div>
    <div>
            <a href="https://virtual-thom.github.io/archives/plan" title="Plan du site">sitemap</a> | <a href="https://virtual-thom.github.io/about" rel="publisher author" title="Curriculum vitae Thom">A propos</a>
    </div>
    <div>
        <a id="goto-site-header" href="#site-header" title="Retourner au début">⇑ Top</a>
    </div>
    <div id="footer-disclaimer">
        <p>Avertissement : vous ne devez pas prendre pour argent comptant le contenu de ce site. Testez toujours la solution en environnement de test.</p>
        <p>Malgré le sérieux que je m'efforce de mettre dans le contenu de ces billets, je ne pourrai être tenu responsable d'éventuelles erreurs que cela pourrait engendrer.</p>
    </div>
    <div>
        <a class="hidden" href="https://virtual-thom.github.io/archives/sitemap.xml" title="SiteMap">sitemap</a>
    </div>
</footer>

    </div>
  </body>

</html>