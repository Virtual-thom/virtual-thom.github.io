<html>
  <head>
    <title>Le fantome de Thomas - Alix l'herboriste</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200..900&family=Mr+Dafoe&display=swap" rel="stylesheet">
    <style>
        .revel {
            display: none;
        }
        pre {
          white-space : pre-wrap;
        }
        body, body pre{
          font-family: "Inconsolata", monospace;
          font-optical-sizing: auto;
          font-weight: <weight>;
          font-style: normal;
          font-variation-settings:
            "wdth" 100;
        }
        .ko {
          color: red; 
        }
        .ok {
          color: green; 
        }
        .container {
          margin : 0 auto ;
          max-width: 80%;
        }
        input {
            height:40px;
        }
        .enigme {
          display: flex;
          gap: 30px;
          align-items: center;
          margin-bottom : 60px;
        }
        img {
          max-width:400px;
        }
    </style>
  </head>
  <body>
    <div class="container">
    <h3>Alix l'herboriste - 4 images, 1 mot</h3>
    <div id="enigme1" class="enigme">
      <img src="alix_1.png" >
      <input type="text">
      <span class="revel ok">Bonne réponse</span>
      <span class="revel ko">Mauvaise réponse</span>
    </div>
    <div id="enigme2" class="enigme">
      <img src="alix_2.png" >
      <input type="text">
      <span class="revel ok">Bonne réponse</span>
      <span class="revel ko">Mauvaise réponse</span>
    </div>
    <div id="enigme3" class="enigme">
      <img src="alix_3.png" >
      <input type="text">
      <span class="revel ok">Bonne réponse</span>
      <span class="revel ko">Mauvaise réponse</span>
    </div>  
    <div id="enigme4" class="enigme">
      <img src="alix_4.png" >
      <input type="text">
      <span class="revel ok">Bonne réponse</span>
      <span class="revel ko">Mauvaise réponse</span>
    </div>
    <div id="enigme5" class="enigme">
      <img src="alix_5.png" >
      <input type="text">
      <span class="revel ok">Bonne réponse</span>
      <span class="revel ko">Mauvaise réponse</span>
    </div>
    <script>
      const REPONSES = [ "cherche", "code", "sous", "plante", "renard" ]
      allInputNode = document.querySelectorAll(".enigme input")
      allInputNode.forEach( inputNode => {
        inputNode.addEventListener("keyup", e => {
          let indexEnigme = parseInt(e.target.parentElement.id.replace("enigme","")) - 1
          let valueEnigme = e.target.value
          let okNode = document.querySelector(`#enigme${indexEnigme + 1} span.ok`)
          let koNode = document.querySelector(`#enigme${indexEnigme + 1} span.ko`)
          okNode.classList.remove("revel");
          koNode.classList.remove("revel");
          let newRegex = new RegExp(REPONSES[indexEnigme], 'i')
          if(valueEnigme.match(newRegex)){
            koNode.classList.add("revel");
          }else if(valueEnigme == ""){
            okNode.classList.add("revel");
            koNode.classList.add("revel");
          }else{
            okNode.classList.add("revel");
          }
        })
      })
    </script>
  </body>
</html>
